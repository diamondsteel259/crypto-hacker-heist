const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Wallet-aOA3RfIn.js","assets/ui-DDb1Cthj.js","assets/vendor-CbTYwD9p.js","assets/tonconnect-BAw8c48p.js","assets/ton-BfqU8ldO.js","assets/query-DJEuKXE5.js","assets/icons-DpVlej8W.js","assets/router-i_uqa6-9.js","assets/utils-BkWO3WEY.js","assets/Rigs-Bs9BRd4V.js","assets/input-CRHmV_Qe.js","assets/label-DvYd1ndl.js","assets/Shop-Df55grVB.js","assets/tabs-CGC_qo3L.js","assets/tonConnect-DcUp7MQM.js","assets/BlockExplorer-DZJRdHeO.js","assets/Referrals-C3DuxHQJ.js","assets/Challenges-BH052sZI.js","assets/Achievements-D2WaIXbd.js","assets/Cosmetics-M-vMSifP.js","assets/Statistics-CsxTBy72.js","assets/SpinWheel-3f8oN-o7.js","assets/Admin-Cq9VxEPR.js","assets/switch-sf127c2O.js","assets/charts-DJyvgdyr.js","assets/Packs-BaT5qI39.js","assets/Subscription-Dl7CeIpx.js","assets/Leaderboard-1-m4o6h-.js","assets/Terms-DWYFaFDF.js","assets/Privacy-Bsdx_D9q.js","assets/Settings-DNKNzvrH.js","assets/not-found-fXCbD5e2.js"])))=>i.map(i=>d[i]);
var Ds=Object.defineProperty;var Is=(t,s,r)=>s in t?Ds(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var et=(t,s,r)=>Is(t,typeof s!="symbol"?s+"":s,r);import{j as e,V as vt,R as jt,A as yt,C as wt,T as Nt,D as St,P as Os,c as Fe,a as Ct,u as z,b as Hs,d as B,e as A,f as ae,g as $s,h as Ms,i as Fs,k as zs,l as Bs,O as fe,m as ge,n as Tt,o as be,p as ve,q as Pt,r as kt,S as qs,s as Ks,t as Ws,v as U,w as Vs}from"./ui-DDb1Cthj.js";import{b as Us,r as l}from"./vendor-CbTYwD9p.js";import{u as Ys,L as tt,S as Xs,R as T}from"./router-i_uqa6-9.js";import{Q as Qs,u as w,a as Y,b as Gs}from"./query-DJEuKXE5.js";import{T as Js}from"./tonconnect-BAw8c48p.js";import{c as Et,t as Zs,f as er}from"./utils-BkWO3WEY.js";import{X as je,A as tr,C as sr,a as rr,b as Re,S as _t,W as Rt,Z as G,G as J,D as ar,T as At,c as ze,E as nr,L as or,P as Lt,d as ir,e as Ie,B as lr,f as Oe,U as ue,g as cr,h as dr,i as Dt,j as It,k as me,l as ne,m as se,n as He,o as oe,p as st,q as ur,r as mr,s as xr,t as pr,u as rt,v as hr,w as fr,x as gr,y as Ot,F as br}from"./icons-DpVlej8W.js";import"./ton-BfqU8ldO.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Ht,at=Us;Ht=at.createRoot,at.hydrateRoot;const vr="modulepreload",jr=function(t){return"/"+t},nt={},k=function(s,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),u=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=jr(c),c in nt)return;nt[c]=!0;const d=c.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const x=document.createElement("link");if(x.rel=d?"stylesheet":vr,d||(x.as="script"),x.crossOrigin="",x.href=c,u&&x.setAttribute("nonce",u),document.head.appendChild(x),d)return new Promise((p,h)=>{x.addEventListener("load",p),x.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=i,window.dispatchEvent(u),!u.defaultPrevented)throw i}return a.then(i=>{for(const u of i||[])u.status==="rejected"&&o(u.reason);return s().catch(o)})},Be="chh_user_id";function q(){return localStorage.getItem(Be)}function yr(t){localStorage.setItem(Be,t)}function ot(){localStorage.removeItem(Be)}function qe(){var t;return((t=window.Telegram)==null?void 0:t.WebApp.initData)||null}async function wr(){const t=qe();if(!t)throw new Error("Telegram init data not available");const s=await fetch("/api/auth/telegram",{method:"POST",headers:{"X-Telegram-Init-Data":t}});if(!s.ok)throw new Error("Telegram authentication failed");const r=await s.json();if(!r.id)throw new Error("Failed to authenticate - no user ID returned");return yr(r.id),r.id}async function $e(){let t=q();if(t)try{const s=qe();if((await fetch(`/api/user/${t}`,{headers:s?{"X-Telegram-Init-Data":s}:void 0})).ok)return t;ot(),t=null}catch{ot(),t=null}try{return t=await wr(),t}catch(s){throw console.error("Telegram authentication failed:",s),new Error("Please open this app in Telegram")}}async function $t(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}function Mt(){const t=qe(),s={};return t&&(s["X-Telegram-Init-Data"]=t),s}async function X(t,s,r){const n={...Mt(),...r?{"Content-Type":"application/json"}:{}},a=await fetch(s,{method:t,headers:n,body:r?JSON.stringify(r):void 0,credentials:"include"});return await $t(a),a}const Nr=({on401:t})=>async({queryKey:s})=>{const r=await fetch(s.join("/"),{headers:Mt(),credentials:"include"});return t==="returnNull"&&r.status===401?null:(await $t(r),await r.json())},E=new Qs({defaultOptions:{queries:{queryFn:Nr({on401:"throw"}),refetchInterval:6e4,refetchOnWindowFocus:"always",staleTime:1/0,retry:(t,s)=>{var r,n,a,o,i;return(r=s==null?void 0:s.message)!=null&&r.includes("401")||(n=s==null?void 0:s.message)!=null&&n.includes("403")||(a=s==null?void 0:s.message)!=null&&a.includes("404")?!1:(o=s==null?void 0:s.message)!=null&&o.toLowerCase().includes("network")||(i=s==null?void 0:s.message)!=null&&i.toLowerCase().includes("fetch")?t<5:t<3},retryDelay:t=>Math.min(1e3*2**t,3e4),retryOnMount:!0},mutations:{retry:!1}}}),Sr=1,Cr=4e3;let Ae=0;function Tr(){return Ae=(Ae+1)%Number.MAX_SAFE_INTEGER,Ae.toString()}const Le=new Map,it=(t,s)=>{if(Le.has(t))return;const r=setTimeout(()=>{Le.delete(t),re({type:"REMOVE_TOAST",toastId:t})},s||Cr);Le.set(t,r)},Pr=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,Sr)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;if(r){const n=t.toasts.find(a=>a.id===r);it(r,n==null?void 0:n.duration)}else t.toasts.forEach(n=>{it(n.id,n.duration)});return{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},le=[];let ce={toasts:[]};function re(t){ce=Pr(ce,t),le.forEach(s=>{s(ce)})}function kr({...t}){const s=Tr();let r=t.duration;r||(t.variant==="destructive"?r=5e3:r=3e3);const n=o=>re({type:"UPDATE_TOAST",toast:{...o,id:s}}),a=()=>re({type:"DISMISS_TOAST",toastId:s});return re({type:"ADD_TOAST",toast:{...t,id:s,duration:r,open:!0,onOpenChange:o=>{o||a()}}}),{id:s,dismiss:a,update:n}}function te(){const[t,s]=l.useState(ce);return l.useEffect(()=>(le.push(s),()=>{const r=le.indexOf(s);r>-1&&le.splice(r,1)}),[t]),{...t,toast:kr,dismiss:r=>re({type:"DISMISS_TOAST",toastId:r})}}const lt=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ct=Et,ye=(t,s)=>r=>{var n;if((s==null?void 0:s.variants)==null)return ct(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=s,i=Object.keys(a).map(d=>{const m=r==null?void 0:r[d],x=o==null?void 0:o[d];if(m===null)return null;const p=lt(m)||lt(x);return a[d][p]}),u=r&&Object.entries(r).reduce((d,m)=>{let[x,p]=m;return p===void 0||(d[x]=p),d},{}),c=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((d,m)=>{let{class:x,className:p,...h}=m;return Object.entries(h).every(f=>{let[g,v]=f;return Array.isArray(v)?v.includes({...o,...u}[g]):{...o,...u}[g]===v})?[...d,x,p]:d},[]);return ct(t,i,c,r==null?void 0:r.class,r==null?void 0:r.className)};function y(...t){return Zs(Et(t))}const Er=Os,Ft=l.forwardRef(({className:t,...s},r)=>e.jsx(vt,{ref:r,className:y("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));Ft.displayName=vt.displayName;const _r=ye("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),zt=l.forwardRef(({className:t,variant:s,...r},n)=>e.jsx(jt,{ref:n,className:y(_r({variant:s}),t),...r}));zt.displayName=jt.displayName;const Rr=l.forwardRef(({className:t,...s},r)=>e.jsx(yt,{ref:r,className:y("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));Rr.displayName=yt.displayName;const Bt=l.forwardRef(({className:t,...s},r)=>e.jsx(wt,{ref:r,className:y("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(je,{className:"h-4 w-4"})}));Bt.displayName=wt.displayName;const qt=l.forwardRef(({className:t,...s},r)=>e.jsx(Nt,{ref:r,className:y("text-sm font-semibold",t),...s}));qt.displayName=Nt.displayName;const Kt=l.forwardRef(({className:t,...s},r)=>e.jsx(St,{ref:r,className:y("text-sm opacity-90",t),...s}));Kt.displayName=St.displayName;function Ar(){const{toasts:t}=te();return e.jsxs(Er,{children:[t.map(function({id:s,title:r,description:n,action:a,...o}){return e.jsxs(zt,{...o,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(qt,{children:r}),n&&e.jsx(Kt,{children:n})]}),a,e.jsx(Bt,{})]},s)}),e.jsx(Ft,{})]})}var[we,En]=Fe("Tooltip",[Ct]),Ke=Ct(),Wt="TooltipProvider",Lr=700,dt="tooltip.open",[Dr,Vt]=we(Wt),Ut=t=>{const{__scopeTooltip:s,delayDuration:r=Lr,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=t,i=l.useRef(!0),u=l.useRef(!1),c=l.useRef(0);return l.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),e.jsx(Dr,{scope:s,isOpenDelayedRef:i,delayDuration:r,onOpen:l.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:l.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:u,onPointerInTransitChange:l.useCallback(d=>{u.current=d},[]),disableHoverableContent:a,children:o})};Ut.displayName=Wt;var Yt="Tooltip",[_n,Ne]=we(Yt),Me="TooltipTrigger",Ir=l.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Ne(Me,r),o=Vt(Me,r),i=Ke(r),u=l.useRef(null),c=z(s,u,a.onTriggerChange),d=l.useRef(!1),m=l.useRef(!1),x=l.useCallback(()=>d.current=!1,[]);return l.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),e.jsx(Hs,{asChild:!0,...i,children:e.jsx(B.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:A(t.onPointerMove,p=>{p.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:A(t.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:A(t.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:A(t.onFocus,()=>{d.current||a.onOpen()}),onBlur:A(t.onBlur,a.onClose),onClick:A(t.onClick,a.onClose)})})});Ir.displayName=Me;var Or="TooltipPortal",[Rn,Hr]=we(Or,{forceMount:void 0}),Z="TooltipContent",Xt=l.forwardRef((t,s)=>{const r=Hr(Z,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=t,i=Ne(Z,t.__scopeTooltip);return e.jsx(ae,{present:n||i.open,children:i.disableHoverableContent?e.jsx(Qt,{side:a,...o,ref:s}):e.jsx($r,{side:a,...o,ref:s})})}),$r=l.forwardRef((t,s)=>{const r=Ne(Z,t.__scopeTooltip),n=Vt(Z,t.__scopeTooltip),a=l.useRef(null),o=z(s,a),[i,u]=l.useState(null),{trigger:c,onClose:d}=r,m=a.current,{onPointerInTransitChange:x}=n,p=l.useCallback(()=>{u(null),x(!1)},[x]),h=l.useCallback((f,g)=>{const v=f.currentTarget,C={x:f.clientX,y:f.clientY},b=qr(C,v.getBoundingClientRect()),D=Kr(C,b),I=Wr(g.getBoundingClientRect()),O=Ur([...D,...I]);u(O),x(!0)},[x]);return l.useEffect(()=>()=>p(),[p]),l.useEffect(()=>{if(c&&m){const f=v=>h(v,m),g=v=>h(v,c);return c.addEventListener("pointerleave",f),m.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",f),m.removeEventListener("pointerleave",g)}}},[c,m,h,p]),l.useEffect(()=>{if(i){const f=g=>{const v=g.target,C={x:g.clientX,y:g.clientY},b=(c==null?void 0:c.contains(v))||(m==null?void 0:m.contains(v)),D=!Vr(C,i);b?p():D&&(p(),d())};return document.addEventListener("pointermove",f),()=>document.removeEventListener("pointermove",f)}},[c,m,i,d,p]),e.jsx(Qt,{...t,ref:o})}),[Mr,Fr]=we(Yt,{isInside:!1}),zr=Bs("TooltipContent"),Qt=l.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...u}=t,c=Ne(Z,r),d=Ke(r),{onClose:m}=c;return l.useEffect(()=>(document.addEventListener(dt,m),()=>document.removeEventListener(dt,m)),[m]),l.useEffect(()=>{if(c.trigger){const x=p=>{const h=p.target;h!=null&&h.contains(c.trigger)&&m()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[c.trigger,m]),e.jsx($s,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:x=>x.preventDefault(),onDismiss:m,children:e.jsxs(Ms,{"data-state":c.stateAttribute,...d,...u,ref:s,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(zr,{children:n}),e.jsx(Mr,{scope:r,isInside:!0,children:e.jsx(Fs,{id:c.contentId,role:"tooltip",children:a||n})})]})})});Xt.displayName=Z;var Gt="TooltipArrow",Br=l.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Ke(r);return Fr(Gt,r).isInside?null:e.jsx(zs,{...a,...n,ref:s})});Br.displayName=Gt;function qr(t,s){const r=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),o=Math.abs(s.left-t.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Kr(t,s,r=5){const n=[];switch(s){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function Wr(t){const{top:s,right:r,bottom:n,left:a}=t;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function Vr(t,s){const{x:r,y:n}=t;let a=!1;for(let o=0,i=s.length-1;o<s.length;i=o++){const u=s[o].x,c=s[o].y,d=s[i].x,m=s[i].y;c>n!=m>n&&r<(d-u)*(n-c)/(m-c)+u&&(a=!a)}return a}function Ur(t){const s=t.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Yr(s)}function Yr(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const a=t[n];for(;s.length>=2;){const o=s[s.length-1],i=s[s.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var Xr=Ut,Jt=Xt;const Qr=Xr,Gr=l.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(Jt,{ref:n,sideOffset:s,className:y("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));Gr.displayName=Jt.displayName;const We=Pt,Jr=kt,Zt=l.forwardRef(({className:t,...s},r)=>e.jsx(fe,{ref:r,className:y("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Zt.displayName=fe.displayName;const Se=l.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Jr,{children:[e.jsx(Zt,{}),e.jsxs(ge,{ref:n,className:y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,e.jsxs(Tt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Se.displayName=ge.displayName;const Ce=({className:t,...s})=>e.jsx("div",{className:y("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Ce.displayName="DialogHeader";const es=({className:t,...s})=>e.jsx("div",{className:y("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});es.displayName="DialogFooter";const Te=l.forwardRef(({className:t,...s},r)=>e.jsx(be,{ref:r,className:y("text-lg font-semibold leading-none tracking-tight",t),...s}));Te.displayName=be.displayName;const ts=l.forwardRef(({className:t,...s},r)=>e.jsx(ve,{ref:r,className:y("text-sm text-muted-foreground",t),...s}));ts.displayName=ve.displayName;const Zr=ye("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-11 px-4 py-2",sm:"min-h-9 rounded-md px-3 text-xs",lg:"min-h-12 rounded-md px-8",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),_=l.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},o)=>{const i=n?qs:"button";return e.jsx(i,{className:y(Zr({variant:s,size:r,className:t})),ref:o,...a})});_.displayName="Button";var Ve="Progress",Ue=100,[ea,An]=Fe(Ve),[ta,sa]=ea(Ve),ss=l.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:o=ra,...i}=t;(a||a===0)&&!ut(a)&&console.error(aa(`${a}`,"Progress"));const u=ut(a)?a:Ue;n!==null&&!mt(n,u)&&console.error(na(`${n}`,"Progress"));const c=mt(n,u)?n:null,d=xe(c)?o(c,u):void 0;return e.jsx(ta,{scope:r,value:c,max:u,children:e.jsx(B.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":xe(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":ns(c,u),"data-value":c??void 0,"data-max":u,...i,ref:s})})});ss.displayName=Ve;var rs="ProgressIndicator",as=l.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=sa(rs,r);return e.jsx(B.div,{"data-state":ns(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});as.displayName=rs;function ra(t,s){return`${Math.round(t/s*100)}%`}function ns(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function xe(t){return typeof t=="number"}function ut(t){return xe(t)&&!isNaN(t)&&t>0}function mt(t,s){return xe(t)&&!isNaN(t)&&t<=s&&t>=0}function aa(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ue}\`.`}function na(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ue} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var os=ss,oa=as;const is=l.forwardRef(({className:t,value:s,...r},n)=>e.jsx(os,{ref:n,className:y("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:e.jsx(oa,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));is.displayName=os.displayName;const ia=ye("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function P({className:t,variant:s,...r}){return e.jsx("div",{className:y(ia({variant:s}),t),...r})}const V=[{title:"Welcome to Crypto Hacker Heist! ðŸŽ®",icon:Re,description:"You're about to become the ultimate crypto mining tycoon! Let's get you started with a quick tour.",tip:"Complete this tutorial to earn 5,000 CS bonus!",color:"text-matrix-green"},{title:"Dashboard - Your Command Center",icon:Re,description:"Track your CS & CHST balance, total hashrate, and active mining rigs. This is your home base where you'll see all your stats and progress.",tip:"Check your dashboard daily for streak bonuses!",color:"text-matrix-green"},{title:"Shop - Buy Mining Rigs",icon:_t,description:"Purchase equipment from Basic PCs to Data Centers! Each rig generates hashrate which mines blocks and earns you CS currency automatically.",tip:"Start with Basic or Gaming tier rigs. Upgrade components for more power!",color:"text-cyber-blue"},{title:"Rigs - Manage Your Equipment",icon:Re,description:"View all your mining equipment, upgrade components (CPU, GPU, RAM, Storage), and manage your mining empire. Better components = more hashrate!",tip:"Component upgrades can be paid with CS, CHST, or TON!",color:"text-purple-500"},{title:"Wallet - Connect TON",icon:Rt,description:"Connect your TON wallet to make purchases with real crypto! Buy loot boxes, power-ups, premium features, and enter the spin wheel jackpot.",tip:"TON payments unlock premium features and the 1 TON jackpot!",color:"text-blue-500"},{title:"Power-Ups & Boosts",icon:G,description:"Activate temporary boosts! Daily free currency claims give you CS/CHST. Premium power-ups bought with TON boost your hashrate (+50%) or luck (+20%) for 1 hour.",tip:"Power-ups stack with your equipment for massive gains!",color:"text-yellow-500"},{title:"Loot Boxes - Random Rewards",icon:J,description:"Open mystery boxes for CS, CHST, and bonus items! Basic (0.5 TON), Premium (2 TON), or Epic (5 TON) boxes. 100-110% RTP guaranteed!",tip:"Free boxes available from daily tasks and referrals!",color:"text-pink-500"},{title:"Spin Wheel - Win Big!",icon:ar,description:"1 free spin daily + buy extras with TON! Win CS, CHST, power-ups, equipment, and the GRAND PRIZE: 1 TON jackpot (0.1% chance)!",tip:"Bulk purchases save money: 10 spins = 10% off, 20 spins = 15% off!",color:"text-purple-500"},{title:"Challenges & Achievements",icon:At,description:"Complete daily challenges for rewards! Unlock achievements for bonus CS and CHST. Track your progress and maximize earnings.",tip:"Challenges reset at midnight UTC - complete them all!",color:"text-orange-500"},{title:"Ready to Mine! ðŸ’°",icon:ze,description:"You're all set! Start by buying your first rig in the Shop, then watch your crypto empire grow. Complete challenges, spin the wheel, and climb the leaderboard!",tip:"Remember: Better equipment = More hashrate = More CS earned!",color:"text-matrix-green"}];function la({open:t,onComplete:s,onSkip:r}){const[n,a]=l.useState(0),o=(n+1)/V.length*100,i=V[n],u=i.icon,c=()=>{n<V.length-1?a(n+1):s()},d=()=>{n>0&&a(n-1)},m=()=>{r()};return e.jsx(We,{open:t,onOpenChange:()=>{},children:e.jsxs(Se,{className:"sm:max-w-lg",onInteractOutside:x=>x.preventDefault(),children:[e.jsxs(Ce,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(P,{variant:"outline",className:"bg-matrix-green/20 text-matrix-green",children:"Tutorial"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[n+1," / ",V.length]})]}),e.jsx(is,{value:o,className:"h-2 mb-4"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-matrix-green/20 to-cyber-blue/20 flex items-center justify-center",children:e.jsx(u,{className:`w-10 h-10 ${i.color}`})})}),e.jsx(Te,{className:"text-center text-2xl",children:i.title}),e.jsx("p",{className:"text-center text-muted-foreground",children:i.description}),e.jsx("div",{className:"p-3 bg-matrix-green/10 rounded-lg border border-matrix-green/30",children:e.jsxs("p",{className:"text-sm text-center",children:["ðŸ’¡ ",e.jsx("strong",{children:"Pro Tip:"})," ",i.tip]})})]}),e.jsxs(es,{className:"flex-col sm:flex-row gap-2",children:[n<V.length-1&&e.jsx(_,{variant:"ghost",onClick:m,className:"sm:flex-1",children:"Skip Tutorial"}),e.jsxs("div",{className:"flex gap-2 w-full sm:flex-1",children:[e.jsxs(_,{variant:"outline",onClick:d,disabled:n===0,className:"flex-1",children:[e.jsx(tr,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsx(_,{onClick:c,className:`flex-1 ${n===V.length-1?"bg-matrix-green hover:bg-matrix-green/90 text-black":"bg-cyber-blue hover:bg-cyber-blue/90"}`,children:n===V.length-1?e.jsxs(e.Fragment,{children:["Finish & Claim 5,000 CS",e.jsx(sr,{className:"w-4 h-4 ml-2"})]}):e.jsxs(e.Fragment,{children:["Next",e.jsx(rr,{className:"w-4 h-4 ml-2"})]})})]})]})]})})}const ca=Pt,da=Ks,ua=kt,ls=l.forwardRef(({className:t,...s},r)=>e.jsx(fe,{className:y("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));ls.displayName=fe.displayName;const ma=ye("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),cs=l.forwardRef(({side:t="right",className:s,children:r,...n},a)=>e.jsxs(ua,{children:[e.jsx(ls,{}),e.jsxs(ge,{ref:a,className:y(ma({side:t}),s),...n,children:[r,e.jsxs(Tt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cs.displayName=ge.displayName;const ds=({className:t,...s})=>e.jsx("div",{className:y("flex flex-col space-y-2 text-center sm:text-left",t),...s});ds.displayName="SheetHeader";const us=l.forwardRef(({className:t,...s},r)=>e.jsx(be,{ref:r,className:y("text-lg font-semibold text-foreground",t),...s}));us.displayName=be.displayName;const xa=l.forwardRef(({className:t,...s},r)=>e.jsx(ve,{ref:r,className:y("text-sm text-muted-foreground",t),...s}));xa.displayName=ve.displayName;function pa(t,[s,r]){return Math.min(r,Math.max(s,t))}function ha(t,s){return l.useReducer((r,n)=>s[r][n]??r,t)}var Ye="ScrollArea",[ms,Ln]=Fe(Ye),[fa,L]=ms(Ye),xs=l.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:o=600,...i}=t,[u,c]=l.useState(null),[d,m]=l.useState(null),[x,p]=l.useState(null),[h,f]=l.useState(null),[g,v]=l.useState(null),[C,b]=l.useState(0),[D,I]=l.useState(0),[O,M]=l.useState(!1),[K,W]=l.useState(!1),S=z(s,$=>c($)),R=Ws(a);return e.jsx(fa,{scope:r,type:n,dir:R,scrollHideDelay:o,scrollArea:u,viewport:d,onViewportChange:m,content:x,onContentChange:p,scrollbarX:h,onScrollbarXChange:f,scrollbarXEnabled:O,onScrollbarXEnabledChange:M,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:K,onScrollbarYEnabledChange:W,onCornerWidthChange:b,onCornerHeightChange:I,children:e.jsx(B.div,{dir:R,...i,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":D+"px",...t.style}})})});xs.displayName=Ye;var ps="ScrollAreaViewport",hs=l.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:n,nonce:a,...o}=t,i=L(ps,r),u=l.useRef(null),c=z(s,u,i.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(B.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});hs.displayName=ps;var H="ScrollAreaScrollbar",Xe=l.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=L(H,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=a,u=t.orientation==="horizontal";return l.useEffect(()=>(u?o(!0):i(!0),()=>{u?o(!1):i(!1)}),[u,o,i]),a.type==="hover"?e.jsx(ga,{...n,ref:s,forceMount:r}):a.type==="scroll"?e.jsx(ba,{...n,ref:s,forceMount:r}):a.type==="auto"?e.jsx(fs,{...n,ref:s,forceMount:r}):a.type==="always"?e.jsx(Qe,{...n,ref:s}):null});Xe.displayName=H;var ga=l.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=L(H,t.__scopeScrollArea),[o,i]=l.useState(!1);return l.useEffect(()=>{const u=a.scrollArea;let c=0;if(u){const d=()=>{window.clearTimeout(c),i(!0)},m=()=>{c=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return u.addEventListener("pointerenter",d),u.addEventListener("pointerleave",m),()=>{window.clearTimeout(c),u.removeEventListener("pointerenter",d),u.removeEventListener("pointerleave",m)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(ae,{present:r||o,children:e.jsx(fs,{"data-state":o?"visible":"hidden",...n,ref:s})})}),ba=l.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=L(H,t.__scopeScrollArea),o=t.orientation==="horizontal",i=ke(()=>c("SCROLL_END"),100),[u,c]=ha("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return l.useEffect(()=>{if(u==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[u,a.scrollHideDelay,c]),l.useEffect(()=>{const d=a.viewport,m=o?"scrollLeft":"scrollTop";if(d){let x=d[m];const p=()=>{const h=d[m];x!==h&&(c("SCROLL"),i()),x=h};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[a.viewport,o,c,i]),e.jsx(ae,{present:r||u!=="hidden",children:e.jsx(Qe,{"data-state":u==="hidden"?"hidden":"visible",...n,ref:s,onPointerEnter:A(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:A(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),fs=l.forwardRef((t,s)=>{const r=L(H,t.__scopeScrollArea),{forceMount:n,...a}=t,[o,i]=l.useState(!1),u=t.orientation==="horizontal",c=ke(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,m=r.viewport.offsetHeight<r.viewport.scrollHeight;i(u?d:m)}},10);return ee(r.viewport,c),ee(r.content,c),e.jsx(ae,{present:n||o,children:e.jsx(Qe,{"data-state":o?"visible":"hidden",...a,ref:s})})}),Qe=l.forwardRef((t,s)=>{const{orientation:r="vertical",...n}=t,a=L(H,t.__scopeScrollArea),o=l.useRef(null),i=l.useRef(0),[u,c]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=ys(u.viewport,u.content),m={...n,sizes:u,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:p=>o.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function x(p,h){return Sa(p,i.current,u,h)}return r==="horizontal"?e.jsx(va,{...m,ref:s,onThumbPositionChange:()=>{if(a.viewport&&o.current){const p=a.viewport.scrollLeft,h=xt(p,u,a.dir);o.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollLeft=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollLeft=x(p,a.dir))}}):r==="vertical"?e.jsx(ja,{...m,ref:s,onThumbPositionChange:()=>{if(a.viewport&&o.current){const p=a.viewport.scrollTop,h=xt(p,u);o.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollTop=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollTop=x(p))}}):null}),va=l.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,o=L(H,t.__scopeScrollArea),[i,u]=l.useState(),c=l.useRef(null),d=z(s,c,o.onScrollbarXChange);return l.useEffect(()=>{c.current&&u(getComputedStyle(c.current))},[c]),e.jsx(bs,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Pe(r)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.x),onDragScroll:m=>t.onDragScroll(m.x),onWheelScroll:(m,x)=>{if(o.viewport){const p=o.viewport.scrollLeft+m.deltaX;t.onWheelScroll(p),Ns(p,x)&&m.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:he(i.paddingLeft),paddingEnd:he(i.paddingRight)}})}})}),ja=l.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,o=L(H,t.__scopeScrollArea),[i,u]=l.useState(),c=l.useRef(null),d=z(s,c,o.onScrollbarYChange);return l.useEffect(()=>{c.current&&u(getComputedStyle(c.current))},[c]),e.jsx(bs,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Pe(r)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.y),onDragScroll:m=>t.onDragScroll(m.y),onWheelScroll:(m,x)=>{if(o.viewport){const p=o.viewport.scrollTop+m.deltaY;t.onWheelScroll(p),Ns(p,x)&&m.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:he(i.paddingTop),paddingEnd:he(i.paddingBottom)}})}})}),[ya,gs]=ms(H),bs=l.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:u,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:m,onResize:x,...p}=t,h=L(H,r),[f,g]=l.useState(null),v=z(s,S=>g(S)),C=l.useRef(null),b=l.useRef(""),D=h.viewport,I=n.content-n.viewport,O=U(m),M=U(c),K=ke(x,10);function W(S){if(C.current){const R=S.clientX-C.current.left,$=S.clientY-C.current.top;d({x:R,y:$})}}return l.useEffect(()=>{const S=R=>{const $=R.target;(f==null?void 0:f.contains($))&&O(R,I)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[D,f,I,O]),l.useEffect(M,[n,M]),ee(f,K),ee(h.content,K),e.jsx(ya,{scope:r,scrollbar:f,hasThumb:a,onThumbChange:U(o),onThumbPointerUp:U(i),onThumbPositionChange:M,onThumbPointerDown:U(u),children:e.jsx(B.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:A(t.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),C.current=f.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),W(S))}),onPointerMove:A(t.onPointerMove,W),onPointerUp:A(t.onPointerUp,S=>{const R=S.target;R.hasPointerCapture(S.pointerId)&&R.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=b.current,h.viewport&&(h.viewport.style.scrollBehavior=""),C.current=null})})})}),pe="ScrollAreaThumb",vs=l.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=gs(pe,t.__scopeScrollArea);return e.jsx(ae,{present:r||a.hasThumb,children:e.jsx(wa,{ref:s,...n})})}),wa=l.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:n,...a}=t,o=L(pe,r),i=gs(pe,r),{onThumbPositionChange:u}=i,c=z(s,x=>i.onThumbChange(x)),d=l.useRef(void 0),m=ke(()=>{d.current&&(d.current(),d.current=void 0)},100);return l.useEffect(()=>{const x=o.viewport;if(x){const p=()=>{if(m(),!d.current){const h=Ca(x,u);d.current=h,u()}};return u(),x.addEventListener("scroll",p),()=>x.removeEventListener("scroll",p)}},[o.viewport,m,u]),e.jsx(B.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:A(t.onPointerDownCapture,x=>{const h=x.target.getBoundingClientRect(),f=x.clientX-h.left,g=x.clientY-h.top;i.onThumbPointerDown({x:f,y:g})}),onPointerUp:A(t.onPointerUp,i.onThumbPointerUp)})});vs.displayName=pe;var Ge="ScrollAreaCorner",js=l.forwardRef((t,s)=>{const r=L(Ge,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?e.jsx(Na,{...t,ref:s}):null});js.displayName=Ge;var Na=l.forwardRef((t,s)=>{const{__scopeScrollArea:r,...n}=t,a=L(Ge,r),[o,i]=l.useState(0),[u,c]=l.useState(0),d=!!(o&&u);return ee(a.scrollbarX,()=>{var x;const m=((x=a.scrollbarX)==null?void 0:x.offsetHeight)||0;a.onCornerHeightChange(m),c(m)}),ee(a.scrollbarY,()=>{var x;const m=((x=a.scrollbarY)==null?void 0:x.offsetWidth)||0;a.onCornerWidthChange(m),i(m)}),d?e.jsx(B.div,{...n,ref:s,style:{width:o,height:u,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function he(t){return t?parseInt(t,10):0}function ys(t,s){const r=t/s;return isNaN(r)?0:r}function Pe(t){const s=ys(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*s;return Math.max(n,18)}function Sa(t,s,r,n="ltr"){const a=Pe(r),o=a/2,i=s||o,u=a-i,c=r.scrollbar.paddingStart+i,d=r.scrollbar.size-r.scrollbar.paddingEnd-u,m=r.content-r.viewport,x=n==="ltr"?[0,m]:[m*-1,0];return ws([c,d],x)(t)}function xt(t,s,r="ltr"){const n=Pe(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,o=s.scrollbar.size-a,i=s.content-s.viewport,u=o-n,c=r==="ltr"?[0,i]:[i*-1,0],d=pa(t,c);return ws([0,i],[0,u])(d)}function ws(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(r-t[0])}}function Ns(t,s){return t>0&&t<s}var Ca=(t,s=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function a(){const o={left:t.scrollLeft,top:t.scrollTop},i=r.left!==o.left,u=r.top!==o.top;(i||u)&&s(),r=o,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function ke(t,s){const r=U(t),n=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(n.current),[]),l.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,s)},[r,s])}function ee(t,s){const r=U(s);Vs(()=>{let n=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(n),a.unobserve(t)}}},[t,r])}var Ss=xs,Ta=hs,Pa=js;const Cs=l.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Ss,{ref:n,className:y("relative overflow-hidden",t),...r,children:[e.jsx(Ta,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Ts,{}),e.jsx(Pa,{})]}));Cs.displayName=Ss.displayName;const Ts=l.forwardRef(({className:t,orientation:s="vertical",...r},n)=>e.jsx(Xe,{ref:n,orientation:s,className:y("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(vs,{className:"relative flex-1 rounded-full bg-border"})}));Ts.displayName=Xe.displayName;const ka={premiumPacks:new Date("2025-01-15"),subscription:new Date("2025-01-20")},pt=30,Ps="chh_seen_features";function ks(){try{const t=localStorage.getItem(Ps);return t?JSON.parse(t):{}}catch(t){return console.error("Failed to read seen features:",t),{}}}function Ea(t){try{localStorage.setItem(Ps,JSON.stringify(t))}catch(s){console.error("Failed to save seen features:",s)}}function ht(t){const s=ka[t];if(!s)return!1;const n=Math.floor((new Date().getTime()-s.getTime())/(1e3*60*60*24));return n>pt?!1:ks()[t]?n<=pt:!0}function _a(t){const s=ks();s[t]||(s[t]=Date.now(),Ea(s))}const Ra=[{title:"Home",url:"/",icon:or,featureKey:null},{title:"Rigs",url:"/rigs",icon:Lt,featureKey:"rigs"},{title:"Shop",url:"/shop",icon:_t,featureKey:"shop"},{title:"Wallet",url:"/wallet",icon:Rt,featureKey:"wallet"}],Aa=(t,s)=>{const r=[],n=o=>{if(!s)return!0;const i=s.find(u=>u.featureKey===o);return i?i.isEnabled:!0};return!(t!=null&&t.hasPremium)&&n("packs")&&r.push({title:"Premium Packs",url:"/packs",icon:J,badge:ht("premiumPacks")?"NEW":void 0,featureName:"premiumPacks",featureKey:"packs"}),!(t!=null&&t.hasActiveSubscription)&&n("subscription")&&r.push({title:"Subscription",url:"/subscription",icon:ir,badge:ht("subscription")?"NEW":void 0,featureName:"subscription",featureKey:"subscription"}),[{title:"Block Explorer",url:"/blocks",icon:lr,featureKey:"blocks"},{title:"Leaderboard",url:"/leaderboard",icon:Oe,featureKey:"leaderboard"},{title:"Referrals",url:"/referrals",icon:ue,featureKey:"referrals"},{title:"Achievements",url:"/achievements",icon:ze,featureKey:"achievements"},{title:"Challenges",url:"/challenges",icon:At,featureKey:"challenges"},{title:"Cosmetics",url:"/cosmetics",icon:cr,featureKey:"cosmetics"},{title:"Statistics",url:"/statistics",icon:Oe,featureKey:"statistics"},{title:"Spin Wheel",url:"/spin",icon:G,featureKey:"spin"},{title:"Settings",url:"/settings",icon:dr,featureKey:null}].forEach(o=>{(!o.featureKey||n(o.featureKey))&&r.push(o)}),t!=null&&t.isAdmin&&r.push({title:"Admin Panel",url:"/admin",icon:Ie,featureKey:null}),r};function La(){const[t]=Ys(),[s,r]=l.useState(!1),n=q(),{data:a}=w({queryKey:["/api/user",n],enabled:!!n}),{data:o}=w({queryKey:["/api/feature-flags"],staleTime:6e4}),i=Ra.filter(d=>{if(!d.featureKey||!o)return!0;const m=o.find(x=>x.featureKey===d.featureKey);return m?m.isEnabled:!0}),u=Aa(a,o),c=u.some(d=>t===d.url);return e.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-black/95 backdrop-blur-lg border-t border-matrix-green/30 safe-area-bottom shadow-[0_-4px_20px_rgba(0,255,65,0.15)]",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(0deg,transparent_50%,rgba(0,255,65,0.03)_50%)] bg-[length:100%_4px] pointer-events-none"}),e.jsxs("div",{className:"flex items-center justify-around h-16 px-2 relative z-10",children:[i.map(d=>{const m=t===d.url;return e.jsx(tt,{href:d.url,"data-testid":`nav-${d.title.toLowerCase()}`,children:e.jsxs("button",{className:`flex flex-col items-center justify-center gap-1 px-3 py-2 min-w-[64px] transition-all relative group ${m?"text-matrix-green scale-105":"text-muted-foreground hover:text-matrix-green/70"}`,children:[m&&e.jsx("div",{className:"absolute inset-0 bg-matrix-green/10 rounded-lg blur-sm animate-pulse"}),e.jsx(d.icon,{className:`w-5 h-5 relative z-10 transition-all ${m?"stroke-[2.5] drop-shadow-[0_0_8px_rgba(0,255,65,0.8)]":"group-hover:scale-110"}`}),e.jsx("span",{className:`text-[10px] font-medium relative z-10 ${m?"font-bold":""}`,children:d.title}),m&&e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-8 h-0.5 bg-gradient-to-r from-transparent via-matrix-green to-transparent"})]})},d.url)}),e.jsxs(ca,{open:s,onOpenChange:r,children:[e.jsx(da,{asChild:!0,children:e.jsxs("button",{className:`flex flex-col items-center justify-center gap-1 px-3 py-2 min-w-[64px] transition-all relative group ${c?"text-matrix-green scale-105":"text-muted-foreground hover:text-matrix-green/70"}`,"data-testid":"nav-more",children:[c&&e.jsx("div",{className:"absolute inset-0 bg-matrix-green/10 rounded-lg blur-sm animate-pulse"}),e.jsx(nr,{className:`w-5 h-5 relative z-10 transition-all ${c?"stroke-[2.5] drop-shadow-[0_0_8px_rgba(0,255,65,0.8)]":"group-hover:scale-110"}`}),e.jsx("span",{className:`text-[10px] font-medium relative z-10 ${c?"font-bold":""}`,children:"More"}),c&&e.jsx("span",{className:"absolute top-1 right-2 w-2 h-2 bg-matrix-green rounded-full animate-ping"}),c&&e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-8 h-0.5 bg-gradient-to-r from-transparent via-matrix-green to-transparent"})]})}),e.jsxs(cs,{side:"bottom",className:"h-[80vh] p-0 bg-black/95 backdrop-blur-lg border-t border-matrix-green/30",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(0deg,transparent_50%,rgba(0,255,65,0.02)_50%)] bg-[length:100%_4px] pointer-events-none"}),e.jsx(ds,{className:"p-4 border-b border-matrix-green/20 relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(us,{className:"text-matrix-green",children:"All Features"}),e.jsx("button",{onClick:()=>r(!1),className:"p-2 hover:bg-matrix-green/10 rounded-md transition-all border border-transparent hover:border-matrix-green/30",children:e.jsx(je,{className:"w-5 h-5 text-matrix-green"})})]})}),e.jsx(Cs,{className:"h-[calc(80vh-73px)]",children:e.jsx("div",{className:"grid grid-cols-2 gap-3 p-4 relative z-10",children:u.map(d=>{const m=t===d.url;return e.jsx(tt,{href:d.url,onClick:()=>{d.featureName&&_a(d.featureName),r(!1)},children:e.jsxs("button",{className:`w-full flex flex-col items-center justify-center gap-2 p-4 rounded-lg border transition-all relative group ${m?"bg-matrix-green/10 border-matrix-green text-matrix-green shadow-[0_0_15px_rgba(0,255,65,0.3)]":"bg-card/50 border-border hover:bg-matrix-green/5 hover:border-matrix-green/30"}`,children:[d.badge&&e.jsx("span",{className:"absolute top-2 right-2 text-[8px] font-bold px-1.5 py-0.5 bg-neon-orange text-black rounded-md shadow-[0_0_10px_rgba(255,165,0,0.5)] animate-pulse",children:d.badge}),e.jsx(d.icon,{className:`w-6 h-6 transition-all ${m?"drop-shadow-[0_0_6px_rgba(0,255,65,0.8)]":"group-hover:scale-110"}`}),e.jsx("span",{className:"text-xs font-medium text-center",children:d.title})]})},d.url)})})})]})]})]})]})}function Da({user:t}){const s=(t==null?void 0:t.csBalance)||0;return e.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-border md:hidden",children:e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded bg-matrix-green/20 flex items-center justify-center",children:e.jsx(Dt,{className:"w-4 h-4 text-matrix-green"})}),e.jsx("div",{children:e.jsx("h2",{className:"font-bold text-xs",children:"Crypto Hacker Heist"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-matrix-green/10 border border-matrix-green/30",children:[e.jsx(It,{className:"w-3.5 h-3.5 text-matrix-green"}),e.jsx("span",{className:"text-xs font-bold font-mono text-matrix-green",children:s.toLocaleString()})]}):e.jsx("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-muted/20",children:e.jsx("div",{className:"w-10 h-3 bg-muted animate-pulse rounded"})}),e.jsx(P,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:"Phase 1"})]})]})})}const N=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:y("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...s}));N.displayName="Card";const Ia=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:y("flex flex-col space-y-1.5 p-6",t),...s}));Ia.displayName="CardHeader";const Oa=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:y("text-2xl font-semibold leading-none tracking-tight",t),...s}));Oa.displayName="CardTitle";const Ha=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:y("text-sm text-muted-foreground",t),...s}));Ha.displayName="CardDescription";const $a=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:y("p-6 pt-0",t),...s}));$a.displayName="CardContent";const Ma=l.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:y("flex items-center p-6 pt-0",t),...s}));Ma.displayName="CardFooter";class Es extends l.Component{constructor(r){super(r);et(this,"handleReportIssue",()=>{var n,a,o,i;const r="cryptohackerheist_bot";(a=(n=window.Telegram)==null?void 0:n.WebApp)!=null&&a.openTelegramLink?window.Telegram.WebApp.openTelegramLink(`https://t.me/${r}`):(i=(o=window.Telegram)==null?void 0:o.WebApp)!=null&&i.openLink&&window.Telegram.WebApp.openLink(`https://t.me/${r}`)});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("App crashed:",r,n)}render(){var r,n;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(N,{className:"p-6 max-w-md w-full text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center text-white text-2xl",children:"!"})}),e.jsx("h1",{className:"text-xl font-bold mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:((r=this.state.error)==null?void 0:r.message)||"An unexpected error occurred"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{onClick:()=>window.location.reload(),className:"w-full",children:"Reload App"}),((n=window.Telegram)==null?void 0:n.WebApp)&&e.jsx(_,{onClick:this.handleReportIssue,variant:"outline",className:"w-full",children:"Report Issue"})]})]})}):this.props.children}}function Fa({onBlockMined:t,userHashrate:s=0}){const[r,n]=l.useState(300),{data:a}=w({queryKey:["/api/blocks/latest"],refetchInterval:1e3}),{data:o}=w({queryKey:["/api/network-stats"],queryFn:()=>fetch("/api/network-stats").then(x=>x.json()),refetchInterval:6e4});l.useEffect(()=>{if(!a)return;const x=5*60*1e3,p=Date.now(),f=new Date(a.timestamp).getTime()+x,g=Math.max(0,Math.floor((f-p)/1e3));n(g);const v=setInterval(()=>{const C=Date.now(),b=Math.max(0,Math.floor((f-C)/1e3));b===0?(t==null||t(),n(Math.floor(x/1e3))):n(b)},1e3);return()=>clearInterval(v)},[a]);const i=Math.floor(r/60),u=r%60,c=r<=10,m=(()=>{if(!s||!(o!=null&&o.totalHashrate)||o.totalHashrate===0)return 0;const x=1e5,p=s/o.totalHashrate;return Math.floor(x*p)})();return e.jsxs(N,{className:"p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 md:w-5 h-4 md:h-5 text-matrix-green"}),e.jsx("h3",{className:"text-xs md:text-sm font-semibold uppercase tracking-wider",children:"Next Block"})]})}),e.jsxs("div",{className:`text-center ${c?"pulse-scale":""}`,children:[e.jsxs("div",{className:"text-4xl md:text-5xl font-bold text-matrix-green matrix-glow font-mono",children:[String(i).padStart(2,"0"),":",String(u).padStart(2,"0")]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 uppercase tracking-wider",children:["Block #",a?a.blockNumber+1:1]}),s>0&&m>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(ne,{className:"w-3 md:w-4 h-3 md:h-4 text-cyber-blue"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase",children:"Your Estimated Reward"})]}),e.jsxs("p",{className:"text-lg md:text-2xl font-bold font-mono text-cyber-blue",children:["~",m.toLocaleString()," CS"]}),e.jsxs("p",{className:"text-[10px] md:text-xs text-muted-foreground mt-1",children:["Based on your ",s.toLocaleString()," H/s"]})]})]})]})}function F({icon:t,label:s,value:r,color:n="text-matrix-green"}){return e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`${n} mt-1`,children:t}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:s}),e.jsx("p",{className:"text-lg font-bold font-mono truncate",children:r})]})]})}function za(){const t=q(),{data:s,isLoading:r}=w({queryKey:["/api/user",t,"network-stats"],enabled:!!t});function n(a){return a===0?"0 H/s":a<1e3?`${a.toFixed(2)} H/s`:a<1e6?`${(a/1e3).toFixed(2)} KH/s`:a<1e9?`${(a/1e6).toFixed(2)} MH/s`:a<1e12?`${(a/1e9).toFixed(2)} GH/s`:a<1e15?`${(a/1e12).toFixed(2)} TH/s`:`${(a/1e15).toFixed(2)} PH/s`}return r||!s?e.jsxs(N,{className:"p-6",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider mb-4",children:"Network Status"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(F,{icon:e.jsx(se,{className:"w-5 h-5"}),label:"Total Hashrate",value:"Loading..."}),e.jsx(F,{icon:e.jsx(ue,{className:"w-5 h-5"}),label:"Active Miners",value:"...",color:"text-cyber-blue"}),e.jsx(F,{icon:e.jsx(G,{className:"w-5 h-5"}),label:"Your Hashrate",value:"...",color:"text-neon-orange"}),e.jsx(F,{icon:e.jsx(se,{className:"w-5 h-5"}),label:"Network Share",value:"...",color:"text-chart-2"})]})]}):e.jsxs(N,{className:"p-6",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider mb-4",children:"Network Status"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(F,{icon:e.jsx(se,{className:"w-5 h-5"}),label:"Total Hashrate",value:n(s.totalNetworkHashrate)}),e.jsx(F,{icon:e.jsx(ue,{className:"w-5 h-5"}),label:"Active Miners",value:s.activeMiners.toLocaleString(),color:"text-cyber-blue"}),e.jsx(F,{icon:e.jsx(G,{className:"w-5 h-5"}),label:"Your Hashrate",value:n(s.userHashrate),color:"text-neon-orange"}),e.jsx(F,{icon:e.jsx(se,{className:"w-5 h-5"}),label:"Network Share",value:s.networkShare>0?`${s.networkShare.toFixed(3)}%`:"0%",color:"text-chart-2"})]})]})}function Ba(){const t=q(),{data:s}=w({queryKey:["/api/user",t],enabled:!!t}),{data:r=[]}=w({queryKey:["/api/user",t,"rewards"],enabled:!!t}),n=(s==null?void 0:s.totalHashrate)??0,a=r.slice(0,12).reverse();let o=[];a.length>0?o=a.map((d,m)=>({time:`${12-m}h ago`,hashrate:d.hashrate})):o=[{time:"Now",hashrate:n}];const i=Math.max(...o.map(d=>d.hashrate),n,1),u=o.length>0?o.reduce((d,m)=>d+m.hashrate,0)/o.length:n,c=i;return e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-matrix-green"}),e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider",children:"Hashrate History"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last ",o.length," blocks"]})})]}),e.jsxs("div",{className:"relative h-48",children:[e.jsxs("div",{className:"absolute left-0 top-0 bottom-0 flex flex-col justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[i.toFixed(0)," H/s"]}),e.jsxs("span",{children:[(i*.5).toFixed(0)," H/s"]}),e.jsx("span",{children:"0 H/s"})]}),o.length>0?e.jsx("div",{className:"ml-16 h-full flex items-end gap-2",children:o.map((d,m)=>{const x=i>0?d.hashrate/i*100:0;return e.jsxs("div",{className:"flex-1 flex flex-col items-center group",children:[e.jsx("div",{className:"w-full flex flex-col justify-end h-full",children:e.jsx("div",{className:"w-full bg-gradient-to-t from-matrix-green to-cyber-blue rounded-t-sm transition-all group-hover:opacity-80",style:{height:`${x}%`}})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 whitespace-nowrap",children:d.time})]},m)})}):e.jsx("div",{className:"ml-16 h-full flex items-center justify-center text-muted-foreground text-sm",children:"No blocks mined yet. Start mining by purchasing equipment!"})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Peak HR"}),e.jsx("p",{className:"text-lg font-bold font-mono text-neon-orange",children:c.toFixed(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Avg HR"}),e.jsx("p",{className:"text-lg font-bold font-mono text-cyber-blue",children:u.toFixed(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Current HR"}),e.jsx("p",{className:"text-lg font-bold font-mono text-matrix-green",children:n.toFixed(0)})]})]})]})}function qa(){const t=q(),{data:s=[],isLoading:r}=w({queryKey:["/api/blocks"],select:o=>o.slice(0,3)}),{data:n=[]}=w({queryKey:[`/api/user/${t}/rewards`],enabled:!!t}),a=s.map(o=>({...o,userReward:n.find(i=>i.blockId===o.id)}));return r?e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider",children:"Recent Blocks"}),e.jsx(P,{variant:"outline",className:"text-xs",children:"Loading..."})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading recent blocks..."})]}):a.length===0?e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider",children:"Recent Blocks"}),e.jsx(P,{variant:"outline",className:"text-xs",children:"No blocks"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"No blocks mined yet. Start mining to see blocks appear!"})]}):e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider",children:"Recent Blocks"}),e.jsxs(P,{variant:"outline",className:"text-xs",children:["Last ",a.length]})]}),e.jsx("div",{className:"space-y-3",children:a.map(o=>e.jsxs("div",{className:"p-4 rounded-md bg-card border border-card-border hover-elevate transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-matrix-green"}),e.jsxs("span",{className:"font-mono font-semibold text-sm",children:["Block #",o.blockNumber]})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:er(new Date(o.timestamp),{addSuffix:!0})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Total Reward"}),e.jsxs("p",{className:"font-mono font-semibold text-matrix-green",children:[o.reward.toLocaleString()," CS"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-muted-foreground mb-1 flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"}),"Miners"]}),e.jsx("p",{className:"font-mono font-semibold",children:o.totalMiners.toLocaleString()})]}),o.userReward&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Your Share"}),e.jsxs("p",{className:"font-mono font-semibold text-cyber-blue",children:[o.userReward.sharePercent.toFixed(3),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Your Reward"}),e.jsxs("p",{className:"font-mono font-semibold text-neon-orange",children:["+",Math.floor(o.userReward.reward)," CS"]})]})]})]})]},o.id))})]})}function Ka(){const t=q(),{data:s,isLoading:r}=w({queryKey:["/api/user",t,"mining-calendar"],enabled:!!t,refetchInterval:6e4});if(r||!s)return e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(He,{className:"w-5 h-5 text-matrix-green"}),e.jsx("h3",{className:"font-semibold text-base",children:"Mining Calendar"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]});const n=s.upcomingBlocks.slice(0,12);return e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5 text-matrix-green"}),e.jsx("h3",{className:"font-semibold text-base",children:"Mining Calendar"})]}),e.jsx(P,{variant:"outline",className:"text-xs",children:"Next Hour"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your Share"}),e.jsxs("p",{className:"text-sm font-bold text-matrix-green",children:[s.userSharePercent,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Block Interval"}),e.jsx("p",{className:"text-sm font-bold",children:s.blockInterval})]})]}),e.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:n.map(a=>{const o=new Date(a.estimatedTime),i=a.recommendPowerUp;return e.jsxs("div",{className:`p-3 rounded-lg border transition-all ${i?"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-500/30":"bg-background/50 border-border"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",className:"text-xs",children:["Block #",a.blockNumber]}),i&&e.jsxs(P,{className:"text-xs bg-yellow-500 hover:bg-yellow-600",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"Power-Up!"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(me,{className:"w-3 h-3"}),a.timeUntil,"m"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Estimated Reward"}),e.jsxs("p",{className:"font-mono font-bold text-matrix-green",children:[a.estimatedReward.toLocaleString()," CS"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Your Share"}),e.jsxs("p",{className:"font-mono font-semibold",children:[a.userSharePercent,"%"]})]})]}),i&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-border/50",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Potential with Power-Ups:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3 text-cyan-400"}),e.jsxs("span",{className:"text-xs font-mono text-cyan-400",children:["+",(a.potentialWithHashrateBoost-a.estimatedReward).toLocaleString()," CS"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3 text-pink-400"}),e.jsxs("span",{className:"text-xs font-mono text-pink-400",children:["+",(a.potentialWithLuckBoost-a.estimatedReward).toLocaleString()," CS"]})]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:o.toLocaleTimeString()})]},a.blockNumber)})}),s.upcomingBlocks.length>12&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.upcomingBlocks.length-12," more blocks in the next 24 hours"]})})]})}function Wa(){const t=q(),{toast:s}=te(),{data:r=[],isLoading:n}=w({queryKey:["/api/user",t,"price-alerts"],enabled:!!t,refetchInterval:3e4}),{data:a}=w({queryKey:["/api/user",t,"price-alerts","check"],enabled:!!t,refetchInterval:6e4});l.useEffect(()=>{a!=null&&a.triggered&&a.alerts.length>0&&(a.alerts.forEach(c=>{s({title:"Price Alert! ðŸ””",description:`You can now afford ${c.equipment.name}!`,duration:5e3})}),E.invalidateQueries({queryKey:["/api/user",t,"price-alerts"]}))},[a,s,t]);const o=Y({mutationFn:async c=>(await X("DELETE",`/api/user/${t}/price-alerts/${c}`)).json(),onSuccess:c=>{E.invalidateQueries({queryKey:["/api/user",t,"price-alerts"]}),s({title:"Alert Deleted",description:c.message||"Price alert removed"})},onError:c=>{s({title:"Error",description:c.message,variant:"destructive"})}});if(n)return e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(st,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"font-semibold text-base",children:"Price Alerts"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]});const i=r.filter(c=>!c.triggered),u=i.filter(c=>c.canAfford);return e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"font-semibold text-base",children:"Price Alerts"})]}),e.jsxs(P,{variant:u.length>0?"default":"outline",className:"text-xs",children:[u.length," Ready"]})]}),i.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ur,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground opacity-30"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No price alerts set"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add alerts in the Shop to get notified when you can afford equipment"})]}):e.jsx("div",{className:"space-y-2",children:i.map(c=>e.jsxs("div",{className:`p-3 rounded-lg border transition-all ${c.canAfford?"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-500/30":"bg-background/50 border-border"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-sm truncate",children:c.equipment.name}),e.jsx(P,{variant:"outline",className:"text-xs flex-shrink-0",children:c.equipment.tier})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Target: ",c.targetPrice.toLocaleString()," CS"]})]}),e.jsx(_,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 flex-shrink-0",onClick:()=>o.mutate(c.id),disabled:o.isPending,children:e.jsx(mr,{className:"w-3 h-3 text-destructive"})})]}),c.canAfford&&e.jsxs("div",{className:"flex items-center gap-1 text-xs font-semibold text-green-500 mt-2",children:[e.jsx(xr,{className:"w-3 h-3"}),e.jsx("span",{children:"You can afford this now!"}),e.jsx(pr,{className:"w-3 h-3 ml-auto"})]})]},c.id))}),i.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border/50",children:e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Alerts check every minute for affordability"})})]})}function Va(){const{data:t}=w({queryKey:["/api/seasons/active"],queryFn:async()=>{const a=await fetch("/api/seasons/active");return a.ok?a.json():null},refetchInterval:6e4});if(!t)return null;const s=new Date(t.endDate),r=new Date,n=Math.ceil((s.getTime()-r.getTime())/(1e3*60*60*24));return e.jsxs(N,{className:"p-4 bg-gradient-to-r from-purple-500/10 via-pink-500/10 to-orange-500/10 border-purple-500/30",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5 text-purple-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-base",children:t.name}),e.jsxs(P,{className:"text-xs bg-purple-500",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"LIVE"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.description})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{className:"p-2 bg-background/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bonus Multiplier"}),e.jsxs("p",{className:"text-lg font-bold text-matrix-green",children:[t.bonusMultiplier,"x"]})]}),e.jsxs("div",{className:"p-2 bg-background/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time Left"}),e.jsxs("p",{className:"text-lg font-bold text-orange-500",children:[n," ",n===1?"day":"days"]})]})]}),t.specialRewards&&e.jsxs("div",{className:"mt-3 p-2 bg-background/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Special Rewards"}),e.jsx("p",{className:"text-xs font-mono",children:t.specialRewards})]})]})}function Ua(){const{toast:t}=te(),s=q(),[r,n]=l.useState(!1),{data:a}=w({queryKey:["/api/user",s,"prestige"],enabled:!!s}),o=Y({mutationFn:async()=>(await X("POST",`/api/user/${s}/prestige/execute`)).json(),onSuccess:x=>{E.invalidateQueries({queryKey:["/api/user",s]}),E.invalidateQueries({queryKey:["/api/user",s,"prestige"]}),E.invalidateQueries({queryKey:["/api/user",s,"equipment"]}),t({title:`Prestige ${x.newPrestigeLevel} Achieved! ðŸŒŸ`,description:`You now have +${x.permanentBoost}% permanent boost to all earnings!`}),n(!1)},onError:x=>{t({title:"Prestige Failed",description:x.message,variant:"destructive"})}});if(!(a!=null&&a.prestige))return null;const{prestige:i,eligible:u,currentBoost:c}=a,d=i.prestigeLevel,m=(d+1)*5;return e.jsxs(e.Fragment,{children:[e.jsxs(N,{className:"p-4 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base",children:"Prestige System"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset for permanent bonuses"})]})]}),u&&e.jsxs(P,{className:"bg-yellow-500",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"Ready!"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"p-2 bg-background/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current Level"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:d})]}),e.jsxs("div",{className:"p-2 bg-background/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current Boost"}),e.jsxs("p",{className:"text-2xl font-bold text-matrix-green",children:["+",c,"%"]})]})]}),e.jsx(_,{onClick:()=>n(!0),disabled:!u,className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",children:u?`Prestige to Level ${d+1}`:"Not Eligible Yet"}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:u?`Next boost: +${m}%`:"Need: 1M CS + 100 total hashrate"})]}),e.jsx(We,{open:r,onOpenChange:n,children:e.jsxs(Se,{children:[e.jsxs(Ce,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5 text-yellow-500"}),"Prestige to Level ",d+1]}),e.jsx(ts,{children:"Reset your progress for permanent bonuses"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border border-yellow-500/30",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"You will gain:"}),e.jsxs("div",{className:"flex items-center gap-2 text-lg font-bold text-matrix-green",children:[e.jsx(ne,{className:"w-5 h-5"}),"+",m,"% permanent boost to all earnings"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"This boost applies to mining rewards, referral bonuses, and all CS earnings"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(hr,{className:"w-5 h-5 text-destructive"}),e.jsx("p",{className:"text-sm font-semibold text-destructive",children:"You will lose:"})]}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"â€¢ All CS (CryptoShards) balance"}),e.jsx("li",{children:"â€¢ All owned equipment"}),e.jsx("li",{children:"â€¢ All component upgrades"}),e.jsx("li",{children:"â€¢ All equipment presets"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-cyan-500/10 border border-cyan-500/30",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"You will keep:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"â€¢ All CHST (CryptoHash Tokens)"}),e.jsx("li",{children:"â€¢ All TON purchases (packs, subscriptions)"}),e.jsx("li",{children:"â€¢ All achievements"}),e.jsx("li",{children:"â€¢ Referral network"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",className:"flex-1",onClick:()=>n(!1),children:"Cancel"}),e.jsx(_,{className:"flex-1 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",onClick:()=>o.mutate(),disabled:o.isPending,children:o.isPending?"Prestiging...":"Confirm Prestige"})]})]})]})})]})}function _s({className:t,...s}){return e.jsx("div",{className:y("animate-pulse rounded-md bg-muted",t),...s})}function De({icon:t,label:s,value:r,subtitle:n,loading:a=!1,iconColor:o="text-matrix-green",valueColor:i="text-foreground",glow:u=!1,size:c="md"}){const m={sm:{container:"p-3",icon:"w-4 h-4",label:"text-xs",value:"text-lg md:text-xl",subtitle:"text-[10px]"},md:{container:"p-4",icon:"w-5 h-5",label:"text-sm",value:"text-2xl md:text-3xl",subtitle:"text-xs"},lg:{container:"p-6",icon:"w-6 h-6",label:"text-base",value:"text-3xl md:text-4xl lg:text-5xl",subtitle:"text-sm"}}[c];return e.jsxs(N,{className:`${m.container} hover:border-matrix-green/50 transition-all ${u?"stat-glow-green":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(t,{className:`${m.icon} ${o}`}),e.jsx("p",{className:`${m.label} font-medium text-muted-foreground uppercase tracking-wider`,children:s})]}),a?e.jsx(_s,{className:"h-9 w-32"}):e.jsx("p",{className:`${m.value} font-bold font-mono ${i} ${u?"matrix-glow":""}`,children:typeof r=="number"?r.toLocaleString():r}),n&&e.jsx("p",{className:`${m.subtitle} text-muted-foreground mt-1`,children:n})]})}function ie({icon:t,title:s,subtitle:r,children:n,defaultExpanded:a=!1,badge:o}){const[i,u]=l.useState(a);return e.jsxs(N,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>u(!i),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t&&e.jsx(t,{className:"w-5 h-5 text-matrix-green"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold",children:s}),r&&e.jsx("p",{className:"text-xs text-muted-foreground",children:r})]}),o]}),e.jsx(_,{variant:"ghost",size:"sm",children:i?e.jsx(fr,{className:"w-4 h-4"}):e.jsx(gr,{className:"w-4 h-4"})})]})}),i&&e.jsx("div",{className:"p-4 pt-0 space-y-4",children:n})]})}function Je(){var t;return typeof window<"u"&&!!((t=window.Telegram)!=null&&t.WebApp)}function ft(){Je()&&window.Telegram.WebApp.HapticFeedback.impactOccurred("light")}function de(){Je()&&window.Telegram.WebApp.HapticFeedback.notificationOccurred("success")}function gt(){Je()&&window.Telegram.WebApp.HapticFeedback.notificationOccurred("error")}function Ya({open:t,onClose:s,userId:r,streakDay:n,reward:a}){const{toast:o}=te(),i=Y({mutationFn:async()=>(await X("POST",`/api/user/${r}/daily-login/claim`)).json(),onSuccess:u=>{E.invalidateQueries({queryKey:["/api/user",r]}),E.invalidateQueries({queryKey:["/api/user",r,"daily-login"]}),E.invalidateQueries({queryKey:["/api/user",r,"streak"]}),de(),o({title:"Daily Reward Claimed! ðŸŽ",description:`Day ${u.streakDay}: +${u.reward.cs} CS, +${u.reward.chst} CHST${u.reward.item?` + ${u.reward.item}`:""}`,duration:5e3}),s()},onError:u=>{o({title:"Claim Failed",description:u.message||"Unable to claim reward",variant:"destructive"})}});return e.jsx(We,{open:t,onOpenChange:s,children:e.jsxs(Se,{className:"sm:max-w-md bg-gradient-to-br from-orange-500/20 via-background to-red-500/20 border-orange-500/50",children:[e.jsx(Ce,{children:e.jsxs(Te,{className:"text-center text-2xl font-bold flex items-center justify-center gap-2",children:[e.jsx(J,{className:"w-8 h-8 text-orange-500"}),"Daily Login Reward"]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 space-y-6",children:[e.jsxs(P,{className:"text-2xl font-bold px-6 py-3 bg-orange-500",children:["Day ",n]}),e.jsxs("div",{className:"w-full space-y-3 bg-background/50 rounded-lg p-6 border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-6 h-6 text-matrix-green"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Cipher Shards"})]}),e.jsxs("span",{className:"text-2xl font-bold text-matrix-green font-mono",children:["+",a.cs.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-6 h-6 text-purple-400"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Heist Tokens"})]}),e.jsxs("span",{className:"text-2xl font-bold text-purple-400 font-mono",children:["+",a.chst]})]}),a.item&&e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-6 h-6 text-yellow-400"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Bonus Item"})]}),e.jsx("span",{className:"text-lg font-semibold text-yellow-400 capitalize",children:a.item.replace(/_/g," ")})]})]}),e.jsx(_,{size:"lg",onClick:()=>i.mutate(),disabled:i.isPending,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-lg font-semibold",children:i.isPending?"Claiming...":e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-5 h-5 mr-2"}),"Claim Reward"]})}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Come back tomorrow to continue your streak!"})]})]})})}function Xa({isLoading:t,timeoutMs:s=5e3}){const[r,n]=l.useState(!1);return l.useEffect(()=>{if(!t){n(!1);return}const a=setTimeout(()=>{n(!0)},s);return()=>clearTimeout(a)},[t,s]),r}function Qa(){var M,K,W,S,R,$,Ee,Ze;const{toast:t}=te(),[s,r]=l.useState(null),n=l.useRef(null),a=l.useRef(null),[o,i]=l.useState(!1);l.useState(!1);const[u,c]=l.useState(!1);l.useEffect(()=>{$e().then(r).catch(j=>{console.error("Failed to initialize user:",j)})},[]);const{data:d,isLoading:m,error:x}=w({queryKey:["/api/user",s],enabled:!!s}),p=Xa({isLoading:m,timeoutMs:5e3}),{data:h}=w({queryKey:["/api/blocks/latest"],enabled:!!s,refetchInterval:5e3});l.useEffect(()=>{d&&d.totalHashrate>0?i(!0):i(!1)},[d]),l.useEffect(()=>{if(!h||!d)return;const j=h.blockNumber,Q=d.csBalance;if(n.current===null){n.current=j,a.current=Q;return}if(j>n.current){if(a.current!==null&&Q>a.current){const _e=Q-a.current;de(),t({title:"Block Mined! ðŸŽ‰",description:`You earned ${_e.toLocaleString()} CS from Block #${j}`,duration:5e3})}n.current=j}a.current=Q},[h,d,t]);const{data:f}=w({queryKey:["/api/user",s,"equipment"],enabled:!!s}),{data:g}=w({queryKey:["/api/user",s,"network-stats"],enabled:!!s,refetchInterval:6e4}),{data:v}=w({queryKey:["/api/user",s,"powerups","active"],enabled:!!s,refetchInterval:1e4});w({queryKey:["/api/user",s,"streak"],enabled:!!s});const{data:C}=w({queryKey:["/api/user",s,"hourly-bonus","status"],enabled:!!s,refetchInterval:6e4}),{data:b}=w({queryKey:["/api/user",s,"daily-login","status"],enabled:!!s}),{data:D}=w({queryKey:["/api/user",s,"rank"],enabled:!!s,refetchInterval:6e4});Y({mutationFn:async()=>(await X("POST",`/api/user/${s}/streak/checkin`)).json(),onSuccess:j=>{E.invalidateQueries({queryKey:["/api/user",s,"streak"]}),E.invalidateQueries({queryKey:["/api/user",s]}),t({title:"Daily Check-in!",description:j.message||`Earned ${j.reward} CS!`})}});const I=Y({mutationFn:async()=>(await X("POST",`/api/user/${s}/daily-login/claim`)).json(),onSuccess:j=>{E.invalidateQueries({queryKey:["/api/user",s,"daily-login"]}),E.invalidateQueries({queryKey:["/api/user",s,"streak"]}),E.invalidateQueries({queryKey:["/api/user",s]}),de(),t({title:"Daily Reward Claimed! ðŸŽ",description:`Day ${j.streakDay}: +${j.reward.cs} CS, +${j.reward.chst} CHST${j.reward.item?` + ${j.reward.item}`:""}`,duration:5e3})},onError:j=>{gt(),t({title:"Claim Failed",description:j.message||"Already claimed today or failed to claim",variant:"destructive"})}}),O=Y({mutationFn:async()=>(await X("POST",`/api/user/${s}/hourly-bonus/claim`)).json(),onSuccess:j=>{E.invalidateQueries({queryKey:["/api/user",s,"hourly-bonus"]}),E.invalidateQueries({queryKey:["/api/user",s]}),de(),t({title:"Bonus Claimed!",description:j.message||`Earned ${j.reward} CS!`})},onError:j=>{gt(),t({title:"Claim Failed",description:j.message||"Failed to claim hourly bonus",variant:"destructive"})}});return l.useEffect(()=>{if(b&&!b.alreadyClaimed&&!u){const j=setTimeout(()=>{c(!0)},1e3);return()=>clearTimeout(j)}},[b,u]),x?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(N,{className:"p-6 max-w-md border-destructive/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-destructive/20 flex items-center justify-center",children:e.jsx(Ie,{className:"w-6 h-6 text-destructive"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-destructive",children:"Connection Error"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unable to reach server"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Failed to load user data. Please check your connection and refresh the page to try again."}),e.jsx(_,{onClick:()=>window.location.reload(),className:"w-full",variant:"outline",children:"Refresh Page"})]})}):(d==null||d.csBalance,e.jsxs("div",{className:"min-h-screen bg-background terminal-scanline",children:[e.jsxs("div",{className:"max-w-7xl mx-auto p-3 md:p-4 space-y-4",children:[p&&m&&e.jsx(N,{className:"p-4 bg-yellow-500/10 border-yellow-500/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-yellow-500 mb-1",children:"Taking longer than usual to load..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This may be due to a slow connection. Try:"}),e.jsxs("ul",{className:"text-xs text-muted-foreground list-disc list-inside mt-1",children:[e.jsx("li",{children:"Check your internet connection"}),e.jsx("li",{children:"Wait a few more seconds"}),e.jsx("li",{children:"Try refreshing the page"})]})]}),e.jsx(_,{onClick:()=>window.location.reload(),size:"sm",variant:"outline",className:"border-yellow-500/50",children:"Refresh Now"})]})}),e.jsxs(N,{className:"p-6 md:p-8 bg-gradient-to-br from-matrix-green/20 via-background to-cyber-blue/20 border-matrix-green/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(0,255,65,0.1),transparent_50%)]"}),e.jsxs("div",{className:"relative z-10 text-center space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx(Ot,{className:"w-6 h-6 md:w-8 md:h-8 text-matrix-green animate-pulse"}),e.jsx("p",{className:"text-sm md:text-base font-medium text-muted-foreground uppercase tracking-widest",children:"Cipher Shards Balance"})]}),m?e.jsx(_s,{className:"h-16 w-64 mx-auto"}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold font-mono text-matrix-green matrix-glow",children:((M=d==null?void 0:d.csBalance)==null?void 0:M.toLocaleString())||0}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:["Welcome back, ",e.jsx("span",{className:"text-matrix-green font-semibold",children:(d==null?void 0:d.username)||"Hacker"}),"!"]}),D&&e.jsxs(P,{variant:"outline",className:"text-xs border-matrix-green/50 text-matrix-green",children:["Rank #",D.balanceRank," of ",D.totalUsers]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[b&&e.jsxs(N,{className:"p-4 bg-gradient-to-r from-orange-500/10 to-red-500/10 border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-orange-500"}),e.jsx("h3",{className:"text-sm md:text-base font-semibold",children:"Daily Login Reward"})]}),b.alreadyClaimed?e.jsx(P,{variant:"outline",className:"text-xs border-green-500 text-green-500",children:"âœ“ Claimed"}):e.jsx(P,{variant:"default",className:"text-xs bg-orange-500",children:"Available!"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:b.alreadyClaimed?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-lg font-bold text-orange-500",children:["Day ",b.streakDay]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",(K=b.reward)==null?void 0:K.cs," CS, +",(W=b.reward)==null?void 0:W.chst," CHST"]}),((S=b.reward)==null?void 0:S.item)&&e.jsx("p",{className:"text-xs text-purple-400 capitalize mt-1",children:b.reward.item.replace(/_/g," ")})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xl font-bold text-orange-500",children:["Day ",b.nextStreakDay]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",(R=b.nextReward)==null?void 0:R.cs," CS"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",($=b.nextReward)==null?void 0:$.chst," CHST"]}),((Ee=b.nextReward)==null?void 0:Ee.item)&&e.jsxs("p",{className:"text-xs text-purple-400 capitalize mt-1",children:["+ ",b.nextReward.item.replace(/_/g," ")]})]})}),e.jsx(_,{size:"sm",onClick:()=>{ft(),I.mutate()},disabled:b.alreadyClaimed||I.isPending,className:"bg-orange-500 hover:bg-orange-600",children:I.isPending?"Claiming...":b.alreadyClaimed?"Claimed":"Claim Now"})]})]}),C&&e.jsxs(N,{className:"p-4 bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5 text-green-500"}),e.jsx("h3",{className:"text-sm md:text-base font-semibold",children:"Hourly Bonus"})]}),C.available?e.jsxs(P,{variant:"default",className:"text-xs bg-green-500",children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"Available"]}):e.jsxs(P,{variant:"outline",className:"text-xs",children:[C.minutesRemaining,"m left"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-green-500",children:"500-2,000 CS"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Random reward"})]}),e.jsx(_,{size:"sm",onClick:()=>{ft(),O.mutate()},disabled:!C.available||O.isPending,className:"bg-green-500 hover:bg-green-600",children:O.isPending?"Claiming...":"Claim Now"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[e.jsx(De,{icon:ne,label:"Your Hashrate",value:(d==null?void 0:d.totalHashrate)??0,subtitle:`H/s ${o?"âš¡ Mining":""}`,loading:m,iconColor:o?"text-matrix-green animate-pulse":"text-neon-orange",valueColor:o?"text-matrix-green":"text-foreground",glow:o,size:"md"}),e.jsx(De,{icon:Lt,label:"Your Rigs",value:(f==null?void 0:f.length)||0,subtitle:"Active",loading:m,iconColor:"text-cyber-blue",size:"md"}),e.jsx(De,{icon:Dt,label:"Network Share",value:`${((Ze=g==null?void 0:g.userSharePercentage)==null?void 0:Ze.toFixed(2))||"0.00"}%`,subtitle:"of total",loading:m,iconColor:"text-chart-2",valueColor:"text-cyber-blue",size:"md"})]}),e.jsxs(ie,{icon:br,title:"Season & Prestige",subtitle:"Special events and progression",defaultExpanded:!1,children:[e.jsx(Va,{}),e.jsx(Ua,{})]}),v&&v.active_power_ups&&v.active_power_ups.length>0&&e.jsxs(ie,{icon:G,title:"Active Power-Ups",subtitle:"Currently active boosts",defaultExpanded:!0,badge:e.jsxs(P,{variant:"secondary",className:"text-xs",children:[v.active_power_ups.length," Active"]}),children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:v.active_power_ups.map((j,Q)=>{const _e=j.power_up_type==="hashrate-boost"?Ie:oe,Rs=j.power_up_type==="hashrate-boost"?"text-cyan-400":"text-pink-400",As=Math.floor(j.time_remaining_seconds/60),Ls=j.time_remaining_seconds%60;return e.jsxs(N,{className:"p-3 bg-background/50 border-border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_e,{className:`w-4 h-4 ${Rs}`}),e.jsx("p",{className:"text-xs md:text-sm font-medium",children:j.power_up_type==="hashrate-boost"?"Hashrate Boost":"Luck Boost"})]}),e.jsxs("p",{className:"text-lg md:text-2xl font-bold font-mono text-matrix-green",children:["+",j.boost_percentage,"%"]}),e.jsxs("p",{className:"text-[10px] md:text-xs text-muted-foreground mt-1",children:[As,"m ",Ls,"s remaining"]})]},Q)})}),v.effects&&(v.effects.total_hashrate_boost>0||v.effects.total_luck_boost>0)&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border/50",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-semibold",children:"Total Effects:"})," ",v.effects.total_hashrate_boost>0&&`+${v.effects.total_hashrate_boost}% Hashrate `,v.effects.total_luck_boost>0&&`+${v.effects.total_luck_boost}% Luck`]})})]}),e.jsxs(ie,{icon:Oe,title:"Mining Stats & Analytics",subtitle:"Block timer, hashrate chart, and network statistics",defaultExpanded:!1,children:[e.jsx(Fa,{userHashrate:(d==null?void 0:d.totalHashrate)||0}),e.jsx(Ba,{}),e.jsx(za,{})]}),e.jsx(ie,{icon:se,title:"Activity & History",subtitle:"Recent blocks, mining calendar, and price alerts",defaultExpanded:!1,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(qa,{})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Ka,{})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Wa,{})})]})})]}),b&&!b.alreadyClaimed&&b.nextStreakDay&&b.nextReward&&s&&e.jsx(Ya,{open:u,onClose:()=>c(!1),userId:s,streakDay:b.nextStreakDay,reward:b.nextReward})]}))}const Ga=l.lazy(()=>k(()=>import("./Wallet-aOA3RfIn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Ja=l.lazy(()=>k(()=>import("./Rigs-Bs9BRd4V.js"),__vite__mapDeps([9,1,2,5,10,11,6,7,3,4,8]))),Za=l.lazy(()=>k(()=>import("./Shop-Df55grVB.js"),__vite__mapDeps([12,1,2,5,13,14,3,4,10,6,7,8]))),en=l.lazy(()=>k(()=>import("./BlockExplorer-DZJRdHeO.js"),__vite__mapDeps([15,1,2,5,10,6,8,7,3,4]))),tn=l.lazy(()=>k(()=>import("./Referrals-C3DuxHQJ.js"),__vite__mapDeps([16,1,2,5,10,6,8,7,3,4]))),sn=l.lazy(()=>k(()=>import("./Challenges-BH052sZI.js"),__vite__mapDeps([17,1,2,5,6,7,3,4,8]))),rn=l.lazy(()=>k(()=>import("./Achievements-D2WaIXbd.js"),__vite__mapDeps([18,1,2,5,6,7,3,4,8]))),an=l.lazy(()=>k(()=>import("./Cosmetics-M-vMSifP.js"),__vite__mapDeps([19,1,2,5,14,3,4,6,7,8]))),nn=l.lazy(()=>k(()=>import("./Statistics-CsxTBy72.js"),__vite__mapDeps([20,1,2,5,6,7,3,4,8]))),on=l.lazy(()=>k(()=>import("./SpinWheel-3f8oN-o7.js"),__vite__mapDeps([21,1,2,5,14,3,4,6,7,8]))),ln=l.lazy(()=>k(()=>import("./Admin-Cq9VxEPR.js"),__vite__mapDeps([22,1,2,5,23,10,11,6,24,8,7,3,4]))),cn=l.lazy(()=>k(()=>import("./Packs-BaT5qI39.js"),__vite__mapDeps([25,1,2,5,14,3,4,6,7,8]))),dn=l.lazy(()=>k(()=>import("./Subscription-Dl7CeIpx.js"),__vite__mapDeps([26,1,2,5,14,3,4,6,7,8]))),un=l.lazy(()=>k(()=>import("./Leaderboard-1-m4o6h-.js"),__vite__mapDeps([27,1,2,5,13,6,7,3,4,8]))),mn=l.lazy(()=>k(()=>import("./Terms-DWYFaFDF.js"),__vite__mapDeps([28,1,2,7,6,5,3,4,8]))),xn=l.lazy(()=>k(()=>import("./Privacy-Bsdx_D9q.js"),__vite__mapDeps([29,1,2,7,6,5,3,4,8]))),pn=l.lazy(()=>k(()=>import("./Settings-DNKNzvrH.js"),__vite__mapDeps([30,1,2,5,23,11,6,7,3,4,8]))),hn=l.lazy(()=>k(()=>import("./not-found-fXCbD5e2.js"),__vite__mapDeps([31,1,2,6,7,5,3,4,8])));function fn(){return e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary/20 border-t-primary rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading page..."})]})})}function gn(){return e.jsx(l.Suspense,{fallback:e.jsx(fn,{}),children:e.jsxs(Xs,{children:[e.jsx(T,{path:"/",component:Qa}),e.jsx(T,{path:"/wallet",component:Ga}),e.jsx(T,{path:"/rigs",component:Ja}),e.jsx(T,{path:"/shop",component:Za}),e.jsx(T,{path:"/blocks",component:en}),e.jsx(T,{path:"/referrals",component:tn}),e.jsx(T,{path:"/leaderboard",component:un}),e.jsx(T,{path:"/challenges",component:sn}),e.jsx(T,{path:"/achievements",component:rn}),e.jsx(T,{path:"/cosmetics",component:an}),e.jsx(T,{path:"/packs",component:cn}),e.jsx(T,{path:"/subscription",component:dn}),e.jsx(T,{path:"/statistics",component:nn}),e.jsx(T,{path:"/spin",component:on}),e.jsx(T,{path:"/admin",component:ln}),e.jsx(T,{path:"/settings",component:pn}),e.jsx(T,{path:"/terms",component:mn}),e.jsx(T,{path:"/privacy",component:xn}),e.jsx(T,{component:hn})]})})}function bn(){var h;const{toast:t}=te(),[s,r]=l.useState(null),[n,a]=l.useState(!1),[o,i]=l.useState(!0),[u,c]=l.useState(null);l.useEffect(()=>{(async()=>{i(!0);try{if((await(await fetch("/api/health")).json()).status==="degraded"){c("Service is temporarily unavailable. Please try again in a few minutes."),i(!1);return}}catch(g){console.warn("Health check failed, proceeding with initialization:",g)}try{const g=await $e();r(g),i(!1),c(null)}catch(g){console.error("Failed to initialize user:",g),c(g.message||"Failed to initialize. Please try again."),i(!1)}})()},[]);const{data:d}=w({queryKey:["/api/user",s],enabled:!!s});l.useEffect(()=>{if(d&&!d.tutorialCompleted&&!n){const f=setTimeout(()=>{a(!0)},1e3);return()=>clearTimeout(f)}},[d,n]);const m=Y({mutationFn:async()=>(await X("POST",`/api/user/${s}/tutorial/complete`)).json(),onSuccess:f=>{E.invalidateQueries({queryKey:["/api/user",s]}),a(!1),t({title:"ðŸŽ‰ Tutorial Complete!",description:f.message||"You earned 5,000 CS! Start mining now!"})},onError:f=>{console.error("Tutorial completion error:",f),a(!1)}}),x=()=>{m.mutate()},p=()=>{m.mutate()};if(o)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-primary/20 border-t-primary rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Initializing..."})]})});if(u){const f=u.includes("Please open this app in Telegram");return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center text-white text-2xl mx-auto mb-4",children:"!"}),e.jsx("h1",{className:"text-xl font-bold mb-2",children:"Initialization Failed"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:u}),e.jsxs("div",{className:"space-y-2",children:[!f&&e.jsx("button",{onClick:()=>{c(null),i(!0),$e().then(g=>{r(g),i(!1),c(null)}).catch(g=>{console.error("Failed to initialize user:",g),c(g.message||"Failed to initialize. Please try again."),i(!1)})},className:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"Retry"}),f&&((h=window.Telegram)==null?void 0:h.WebApp)&&e.jsx("button",{onClick:()=>{var g,v;(v=(g=window.Telegram)==null?void 0:g.WebApp)!=null&&v.openTelegramLink&&window.Telegram.WebApp.openTelegramLink("https://t.me/cryptohackerheist_bot")},className:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"Open in Telegram"})]})]})})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col h-screen w-full bg-background",children:[e.jsx(Da,{user:d}),e.jsx("main",{className:"flex-1 overflow-auto pb-16",children:e.jsx(Es,{children:e.jsx(gn,{})})}),e.jsx(La,{})]}),e.jsx(la,{open:n,onComplete:x,onSkip:p}),e.jsx(Ar,{})]})}function vn(){return l.useEffect(()=>{var s;(s=window.Telegram)!=null&&s.WebApp&&(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand())},[]),e.jsx(Js,{manifestUrl:"https://crypto-hacker-heist.onrender.com/tonconnect-manifest.json",children:e.jsx(Gs,{client:E,children:e.jsx(Qr,{children:e.jsx(bn,{})})})})}var bt;try{Ht(document.getElementById("root")).render(e.jsx(Es,{children:e.jsx(vn,{})})),(bt=document.getElementById("initial-loader"))==null||bt.remove()}catch(t){console.error("Critical error loading app:",t);const s=document.getElementById("root");s&&(s.innerHTML=`
      <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; text-align: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
        <div>
          <div style="width: 48px; height: 48px; background: #ff3b30; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; color: white; font-size: 24px;">!</div>
          <h1 style="font-size: 20px; font-weight: bold; margin-bottom: 8px;">Critical error loading app</h1>
          <p style="color: #666; margin-bottom: 16px;">Please refresh the page to try again.</p>
          <button onclick="window.location.reload()" style="padding: 10px 20px; background: #0088cc; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px;">Refresh Page</button>
        </div>
      </div>
    `)}export{P as B,N as C,We as D,is as P,_s as S,_ as a,Se as b,Ce as c,Te as d,ts as e,X as f,q as g,Xa as h,$e as i,qe as j,y as k,Ia as l,Oa as m,$a as n,ye as o,E as q,te as u};
