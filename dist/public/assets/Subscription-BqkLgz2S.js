import{h as S,g as C,r as P,c as T,i as N,j as e,E as x,C as c,B as f,e as h,ae as A,a2 as n,Z as E,H as k,p as y,q as w}from"./index-BRkOYZ2Z.js";import{u as M,s as O}from"./tonConnect-DG2j1IRE.js";import{S as F}from"./star-6ShTec_2.js";const B="UQBdFhwckY9C8MU0AC4uiPbRH_C3QIjZH6OzV47ROfHjnyfe",H=[{icon:E,text:"+20% earnings boost on all CS rewards"},{icon:k,text:"Free daily power-up (Hashrate or Luck Boost)"},{icon:F,text:"Access to exclusive cosmetic items"},{icon:x,text:"Subscriber badge on profile and leaderboards"},{icon:n,text:"Priority support"}];function L(){const{toast:l}=S(),i=C(),{tonConnectUI:p,isConnected:v}=M(),[o,d]=P.useState(null),{data:r}=T({queryKey:["/api/user",i,"subscription"],enabled:!!i}),u=N({mutationFn:async({type:s,tonAmount:a,txHash:t})=>(await y("POST",`/api/user/${i}/subscription/subscribe`,{subscriptionType:s,tonAmount:a.toString(),tonTransactionHash:t})).json(),onSuccess:s=>{w.invalidateQueries({queryKey:["/api/user",i,"subscription"]}),l({title:"Subscription Activated! ðŸ‘‘",description:s.message||"Welcome to premium membership!"}),d(null)},onError:s=>{l({title:"Subscription Failed",description:s.message,variant:"destructive"}),d(null)}}),b=N({mutationFn:async()=>(await y("POST",`/api/user/${i}/subscription/cancel`)).json(),onSuccess:s=>{w.invalidateQueries({queryKey:["/api/user",i,"subscription"]}),l({title:"Subscription Cancelled",description:s.message||"Your subscription has been cancelled"})},onError:s=>{l({title:"Cancellation Failed",description:s.message,variant:"destructive"})}}),g=async(s,a)=>{if(!v){await p.openModal();return}d(s);try{const t=await O(p,B,a.toString(),`Subscription: ${s}`);if(t)u.mutate({type:s,tonAmount:a,txHash:t});else throw new Error("Transaction cancelled")}catch(t){l({title:"Transaction Failed",description:t.message||"Failed to send TON transaction",variant:"destructive"}),d(null)}},j=(r==null?void 0:r.subscribed)||!1,m=r==null?void 0:r.subscription;return e.jsx("div",{className:"min-h-screen bg-background terminal-scanline",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center",children:e.jsx(x,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Premium Subscription"}),e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Unlock exclusive benefits and boost your earnings"})]})]}),j&&m&&e.jsxs(c,{className:"p-6 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-6 h-6 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Active Subscriber"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[m.subscriptionType==="lifetime"?"Lifetime":"Monthly"," Plan"]})]})]}),e.jsxs(f,{className:"bg-yellow-500",children:[e.jsx(x,{className:"w-3 h-3 mr-1"}),"PREMIUM"]})]}),m.endDate&&e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Renews: ",new Date(m.endDate).toLocaleDateString()]}),e.jsxs(h,{variant:"outline",onClick:()=>{confirm("Are you sure you want to cancel your subscription?")&&b.mutate()},disabled:b.isPending,className:"w-full",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),b.isPending?"Cancelling...":"Cancel Subscription"]})]}),e.jsxs(c,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Premium Benefits"}),e.jsx("div",{className:"space-y-3",children:H.map((s,a)=>{const t=s.icon;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center flex-shrink-0",children:e.jsx(t,{className:"w-4 h-4 text-white"})}),e.jsx("p",{className:"text-sm",children:s.text})]},a)})})]}),!j&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(c,{className:"p-6 border-2 border-purple-500",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Monthly"}),e.jsx("div",{className:"text-4xl font-bold mb-2",children:"5 TON"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"per month"})]}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(n,{className:"w-4 h-4 text-green-500"}),"All premium benefits"]}),e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(n,{className:"w-4 h-4 text-green-500"}),"Cancel anytime"]}),e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(n,{className:"w-4 h-4 text-green-500"}),"Auto-renews monthly"]})]}),e.jsx(h,{onClick:()=>g("monthly",5),disabled:o!==null||u.isPending,className:"w-full bg-purple-500 hover:bg-purple-600",children:o==="monthly"?"Processing...":"Subscribe Monthly"})]}),e.jsxs(c,{className:"p-6 border-2 border-yellow-500 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0",children:e.jsx(f,{className:"bg-yellow-500 rounded-none rounded-bl-lg",children:"BEST VALUE"})}),e.jsxs("div",{className:"text-center mb-6 mt-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Lifetime"}),e.jsx("div",{className:"text-4xl font-bold mb-2",children:"50 TON"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"one-time payment"}),e.jsx("p",{className:"text-xs text-matrix-green mt-1",children:"Save 83% vs monthly!"})]}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(n,{className:"w-4 h-4 text-green-500"}),"All premium benefits"]}),e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(n,{className:"w-4 h-4 text-green-500"}),"Never expires"]}),e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(n,{className:"w-4 h-4 text-green-500"}),"Exclusive lifetime badge"]})]}),e.jsx(h,{onClick:()=>g("lifetime",50),disabled:o!==null||u.isPending,className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",children:o==="lifetime"?"Processing...":"Get Lifetime Access"})]})]}),e.jsx(c,{className:"p-4 bg-muted/30",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ðŸ‘‘ ",e.jsx("strong",{children:"Premium status:"})," Subscriber badge displayed on your profile and leaderboards.",e.jsx("br",{}),"ðŸ’° ",e.jsx("strong",{children:"Earnings boost:"})," All CS rewards increased by 20% (stacks with prestige bonuses).",e.jsx("br",{}),"ðŸ”’ ",e.jsx("strong",{children:"Secure:"})," Payments processed through TON blockchain. Cancel anytime."]})})]})})}export{L as default};
