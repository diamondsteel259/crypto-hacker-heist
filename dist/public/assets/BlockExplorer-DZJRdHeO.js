import{j as e}from"./ui-DDb1Cthj.js";import{u as i}from"./query-DJEuKXE5.js";import{g as N,C as a,B as b}from"./index-DP8xWL5x.js";import{I as w}from"./input-CRHmV_Qe.js";import{K as v,B as y,c as x,U as p,k}from"./icons-DpVlej8W.js";import{a as M}from"./utils-BkWO3WEY.js";import"./vendor-CbTYwD9p.js";import"./router-i_uqa6-9.js";import"./tonconnect-BAw8c48p.js";import"./ton-BfqU8ldO.js";function I(){const d=N();i({queryKey:["/api/user",d],enabled:!!d});const{data:o=[],isLoading:m}=i({queryKey:["/api/blocks"]}),{data:u=[]}=i({queryKey:[`/api/user/${d}/rewards`],enabled:!!d}),r=o[0],h=(r==null?void 0:r.totalMiners)||0,f=s=>s>=1e6?`${(s/1e6).toFixed(2)} PH/s`:s>=1e3?`${(s/1e3).toFixed(2)} TH/s`:`${s.toFixed(2)} GH/s`,g=s=>{const t=u.find(l=>l.block.blockNumber===s);return t?{share:t.hashrate,reward:t.reward}:null},j=s=>{const t=new Date,l=new Date(s),n=Math.floor((t.getTime()-l.getTime())/6e4);if(n<1)return"Just now";if(n<60)return`${n}m ago`;const c=Math.floor(n/60);return c<24?`${c}h ago`:`${Math.floor(c/24)}d ago`};return e.jsx("div",{className:"min-h-screen bg-background terminal-scanline",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-3 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(w,{placeholder:"Search block #...",className:"pl-9","data-testid":"input-search-block"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(a,{className:"p-2.5 md:p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-1 md:mb-2",children:[e.jsx(y,{className:"w-3 md:w-4 h-3 md:h-4 text-matrix-green"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase",children:"Latest Block"})]}),e.jsx("p",{className:"text-lg md:text-2xl font-bold font-mono","data-testid":"text-latest-block",children:m?"...":(r==null?void 0:r.blockNumber)||"0"})]}),e.jsxs(a,{className:"p-2.5 md:p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-1 md:mb-2",children:[e.jsx(x,{className:"w-3 md:w-4 h-3 md:h-4 text-neon-orange"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase",children:"Block Reward"})]}),e.jsx("p",{className:"text-lg md:text-2xl font-bold font-mono text-matrix-green",children:"100K"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"CS"})]}),e.jsxs(a,{className:"p-2.5 md:p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-1 md:mb-2",children:[e.jsx(p,{className:"w-3 md:w-4 h-3 md:h-4 text-cyber-blue"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase",children:"Active Miners"})]}),e.jsx("p",{className:"text-lg md:text-2xl font-bold font-mono","data-testid":"text-active-miners",children:m?"...":h.toLocaleString()})]}),e.jsxs(a,{className:"p-2.5 md:p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-1 md:mb-2",children:[e.jsx(k,{className:"w-3 md:w-4 h-3 md:h-4 text-chart-2"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase",children:"Avg Block Time"})]}),e.jsx("p",{className:"text-lg md:text-2xl font-bold font-mono",children:"5:00"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"minutes"})]})]}),e.jsxs(a,{className:"p-4 md:p-6",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider mb-4",children:"Recent Blocks"}),m?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Loading blocks..."}):o.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No blocks mined yet. Mining will begin shortly!"}):e.jsx("div",{className:"space-y-3",children:o.map(s=>{const t=g(s.blockNumber);return e.jsxs("div",{className:"p-4 rounded-md bg-card border border-card-border hover-elevate transition-all","data-testid":`block-${s.blockNumber}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-4 h-4 text-matrix-green"}),e.jsxs("span",{className:"font-mono font-semibold",children:["Block #",s.blockNumber]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:j(s.timestamp)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:M(new Date(s.timestamp),"MM/dd/yyyy, HH:mm a")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Reward"}),e.jsxs("p",{className:"font-mono font-semibold text-matrix-green",children:[s.reward.toLocaleString()," CS"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-muted-foreground mb-1 flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),"Miners"]}),e.jsx("p",{className:"font-mono font-semibold",children:s.totalMiners.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Network HR"}),e.jsx("p",{className:"font-mono font-semibold text-cyber-blue",children:f(s.totalHashrate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Difficulty"}),e.jsx("p",{className:"font-mono font-semibold",children:s.difficulty})]})]}),t&&t.reward>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Your contribution"}),e.jsxs(b,{variant:"outline",className:"text-xs bg-neon-orange/20 text-neon-orange border-neon-orange/30",children:["+",t.reward.toLocaleString()," CS Earned"]})]})})]},s.blockNumber)})})]})]})})}export{I as default};
