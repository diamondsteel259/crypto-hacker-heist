import{h as w,g as v,r as P,c as T,i as C,j as e,H as x,C as h,B as p,a2 as d,e as S,Z as O,T as I,p as $,q as l}from"./index-BzGJcwWt.js";import{u as A,s as q}from"./tonConnect-CfEkI_Ke.js";const E="UQBdFhwckY9C8MU0AC4uiPbRH_C3QIjZH6OzV47ROfHjnyfe",F=[{id:"starter",name:"Starter Pack",description:"Perfect for beginners",price:"2 TON",priceValue:2,icon:x,color:"from-blue-500 to-cyan-500",rewards:["50,000 CS","1x Gaming Laptop","Instant mining boost"]},{id:"pro",name:"Pro Pack",description:"For serious miners",price:"10 TON",priceValue:10,icon:O,color:"from-purple-500 to-pink-500",popular:!0,rewards:["250,000 CS","100 CHST","1x Server Farm","Power-up bonuses"]},{id:"whale",name:"Whale Pack",description:"Ultimate mining empire",price:"50 TON",priceValue:50,icon:I,color:"from-orange-500 to-red-500",rewards:["1,000,000 CS","500 CHST","1x ASIC S19 Miner","VIP status benefits"]}];function V(){const{toast:t}=w(),n=v(),{tonConnectUI:u,isConnected:g}=A(),[b,i]=P.useState(null),{data:m=[]}=T({queryKey:["/api/user",n,"packs"],enabled:!!n}),c=C({mutationFn:async({packType:s,tonAmount:r,txHash:a})=>(await $("POST",`/api/user/${n}/packs/purchase`,{packType:s,tonAmount:r.toString(),tonTransactionHash:a})).json(),onSuccess:s=>{l.invalidateQueries({queryKey:["/api/user",n,"packs"]}),l.invalidateQueries({queryKey:["/api/user",n]}),l.invalidateQueries({queryKey:["/api/user",n,"equipment"]}),t({title:"Pack Purchased! ðŸŽ‰",description:s.message||"Your rewards have been added to your account"}),i(null)},onError:s=>{t({title:"Purchase Failed",description:s.message,variant:"destructive"}),i(null)}}),j=async s=>{if(!g){await u.openModal();return}if(m.some(r=>r.packType===s.id)){t({title:"Already Purchased",description:`You have already purchased the ${s.name}`,variant:"destructive"});return}i(s.id);try{const r=await q(u,E,s.priceValue.toString(),`Pack: ${s.name}`);if(r)c.mutate({packType:s.id,tonAmount:s.priceValue,txHash:r});else throw new Error("Transaction cancelled")}catch(r){t({title:"Transaction Failed",description:r.message||"Failed to send TON transaction",variant:"destructive"}),i(null)}},f=s=>m.some(r=>r.packType===s);return e.jsx("div",{className:"min-h-screen bg-background terminal-scanline",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx(x,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Premium Packs"}),e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"One-time purchase bundles with instant rewards"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:F.map(s=>{const r=s.icon,a=f(s.id),o=b===s.id;return e.jsxs(h,{className:`relative overflow-hidden ${a?"border-green-500/50":""} ${s.popular?"border-purple-500":""}`,children:[s.popular&&e.jsx("div",{className:"absolute top-0 right-0",children:e.jsx(p,{className:"bg-purple-500 rounded-none rounded-bl-lg",children:"POPULAR"})}),a&&e.jsx("div",{className:"absolute top-0 left-0",children:e.jsxs(p,{className:"bg-green-500 rounded-none rounded-br-lg",children:[e.jsx(d,{className:"w-3 h-3 mr-1"}),"OWNED"]})}),e.jsxs("div",{className:`p-6 bg-gradient-to-br ${s.color} bg-opacity-10`,children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br ${s.color} flex items-center justify-center mb-3`,children:e.jsx(r,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsx("div",{className:"text-3xl font-bold mb-4",children:s.price})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-semibold uppercase",children:"Includes:"}),s.rewards.map((N,y)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(d,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),e.jsx("span",{children:N})]},y))]}),e.jsx(S,{onClick:()=>j(s),disabled:a||o||c.isPending,className:`w-full ${a?"bg-green-500 hover:bg-green-600":`bg-gradient-to-r ${s.color}`}`,children:o||c.isPending?"Processing...":a?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),"Purchased"]}):`Buy Now - ${s.price}`})]})]},s.id)})}),e.jsx(h,{className:"p-4 bg-muted/30",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ðŸ’Ž ",e.jsx("strong",{children:"One-time purchase:"})," Each pack can only be purchased once per account.",e.jsx("br",{}),"ðŸ’° ",e.jsx("strong",{children:"Instant rewards:"})," All items and currency are added to your account immediately.",e.jsx("br",{}),"ðŸ”’ ",e.jsx("strong",{children:"Secure:"})," Payments processed through TON blockchain."]})})]})})}export{V as default};
