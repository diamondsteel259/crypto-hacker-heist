import{f as x,h as u,r as i,M as p,c as h,i as j,j as e,C as r,a0 as g,Z as f,B as n,N,H as C,p as y,q as c}from"./index-BP45Iqwx.js";import{C as v}from"./circle-check-jad-BAQd.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=x("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function $(){const{toast:l}=u(),[a,d]=i.useState(null);i.useEffect(()=>{p().then(d).catch(s=>console.error("Failed to initialize user:",s))},[]);const{data:t,isLoading:m}=h({queryKey:["/api/user",a,"challenges","today"],enabled:!!a,refetchInterval:1e4});if(j({mutationFn:async s=>(await y("POST",`/api/user/${a}/challenges/${s}/complete`)).json(),onSuccess:s=>{c.invalidateQueries({queryKey:["/api/user",a,"challenges"]}),c.invalidateQueries({queryKey:["/api/user",a]}),l({title:"Challenge Completed!",description:s.message||"Reward claimed!"})},onError:s=>{l({title:"Error",description:s.message||"Failed to complete challenge",variant:"destructive"})}}),m||!t)return e.jsx("div",{className:"min-h-screen bg-background p-3",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(r,{className:"p-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading challenges..."})})})});const o=t.completedCount/t.totalCount*100;return e.jsx("div",{className:"min-h-screen bg-background p-3",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx(g,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Daily Challenges"}),e.jsxs("p",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:["Complete ",t.totalCount," challenges every day"]})]})]}),e.jsxs(r,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5 text-yellow-500"}),e.jsx("p",{className:"font-semibold",children:"Daily Progress"})]}),e.jsxs(n,{variant:"outline",className:"text-sm",children:[t.completedCount," / ",t.totalCount]})]}),e.jsx(N,{value:o,className:"h-3"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:t.completedCount===t.totalCount?"ðŸŽ‰ All challenges completed! Come back tomorrow for new challenges.":`Complete ${t.totalCount-t.completedCount} more to finish today's challenges`})]}),e.jsx("div",{className:"space-y-3",children:t.challenges.map(s=>e.jsx(r,{className:`p-4 transition-all ${s.completed?"bg-muted/30 border-green-500/50":"hover:border-primary"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ${s.completed?"bg-green-500/20":"bg-primary/20"}`,children:s.completed?e.jsx(v,{className:"w-6 h-6 text-green-500"}):e.jsx(w,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),s.completed&&e.jsx(n,{variant:"default",className:"bg-green-500 flex-shrink-0",children:"Completed"})]}),e.jsx("div",{className:"flex items-center gap-3 mt-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-matrix-green"}),e.jsxs("span",{className:"text-sm font-mono text-matrix-green font-semibold",children:[s.rewardCs>0&&`${s.rewardCs.toLocaleString()} CS`,s.rewardChst&&s.rewardChst>0&&` + ${s.rewardChst} CHST`,s.rewardItem&&` + ${s.rewardItem}`]})]})}),!s.completed&&e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-xs text-muted-foreground italic",children:["Requirement: ",s.requirement]})})]})]})},s.challengeId))}),e.jsx(r,{className:"p-4 bg-muted/30",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Challenges automatically complete when you meet their requirements. Progress updates every 10 seconds. Challenges reset daily at midnight UTC."]})})]})})}export{$ as default};
